import{r as l,j as e,a as P,t as is,c as ds,b as De,d as ms,J as us,$ as la,e as ra,f as oa,C as xs,g as ca,h as ia,i as fs,k as hs,l as ps,m as da,n as ma,o as ua,p as gs,q as Me,s as xa,u as js,v as ys,w as fa,x as bs,y as ha,z as pa,A as ga,B as vs,D as Ee,E as ws,F as ja,G as Oe,P as Ns,H as ya,R as Cs,T as $s,I as Is,K as ba,L as va,M as Xe,N as de,O as Be,Q as fe,S as wa,U as Na,V as Ds,W as Ca,X as $a,Y as Ia,Z as Da,_ as ka,a0 as ks,a1 as Sa,a2 as Ta,a3 as Ss,a4 as Ts,a5 as Aa,a6 as Fe,a7 as Pe,a8 as Le,a9 as _e,aa as Re,ab as ze,ac as As,ad as Fs,ae as Ps,af as Ls,ag as Fa,ah as _s,ai as Rs,aj as Pa,ak as zs,al as La,am as Ms,an as Es,ao as _a,ap as Os,aq as Ra,ar as za,as as Bs,at as Us,au as Ma,av as Vs,aw as Hs,ax as Ks,ay as Ea,az as Ys,aA as Zs,aB as Gs,aC as Ws,aD as me,aE as Oa,aF as Ba,aG as Ne,aH as Ua,aI as Va,aJ as Js,aK as Xs,aL as we,aM as pe,aN as qs,aO as Qs}from"./vendor-ClqxyGLB.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();const W=l.createContext();function et({children:a,...t}){const[s,r]=l.useState(!1),[o,u]=l.useState(null),[d,p]=l.useState(null),[g,v]=l.useState(null),[A,D]=l.useState(!1),[h,j]=l.useState(),[L,n]=l.useState({height:window.innerHeight,width:window.innerWidth}),m="https://api.madanilab.site",w={clientId:"06b0630f66b18f473a617819261e2e6a.access",clientSecret:"2554796ee90aee81b35787f4d427b86bd1d0cece38c6d9d8bee9336b88b52eb6"};function $(){const M=localStorage.getItem("FinanceMadaniLabBearerToken");u(`Bearer ${M}`),p(localStorage.getItem("FinanceMadaniLabUserId"))}const k=Intl.DateTimeFormat().resolvedOptions().timeZone,T=o?{headers:{Authorization:o,"Content-Type":"application/json","X-User-Timezone":k,"CF-Access-Client-Id":w.clientId,"CF-Access-Client-Secret":w.clientSecret}}:null;return l.useEffect(()=>{async function M(b){try{if(o&&b){const c=await P.get(m+`/api/profile/read-profile/${b}`,T);v(c.data.data),j(c.data.data.currency)}}catch(c){console.error("Error fetching data:",c)}}M(d)},[d]),l.useEffect(()=>{$();const M=()=>{n({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",M),()=>{window.removeEventListener("resize",M)}},[]),e.jsx(W.Provider,{...t,value:{token:o,userId:d,userData:g,apiUrl:m,config:T,update:s,setUpdate:r,setUserData:v,dialogIsOpen:A,setDialogIsOpen:D,setCurrency:j,currency:h,dims:L},children:a})}function x(...a){return is(ds(a))}const at=De("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _({className:a,variant:t,...s}){return e.jsx("div",{className:x(at({variant:t}),a),...s})}const st=({...a})=>{const{theme:t="system"}=ms();return e.jsx(us,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...a})};function H({className:a,...t}){return e.jsx("div",{className:x("animate-pulse rounded-md bg-primary/10",a),...t})}const Z=hs,G=ps,tt=fs,V=oa,Ha=l.forwardRef(({className:a,...t},s)=>e.jsx(la,{ref:s,className:x("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t}));Ha.displayName=la.displayName;const K=l.forwardRef(({className:a,children:t,...s},r)=>e.jsxs(tt,{children:[e.jsx(Ha,{}),e.jsxs(ra,{ref:r,className:x("fixed left-[50%] top-[50%] z-50 grid w-full max-w-xl translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s,children:[t,e.jsxs(oa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(xs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));K.displayName=ra.displayName;const X=({className:a,...t})=>e.jsx("div",{className:x("flex flex-col space-y-1.5 text-center sm:text-left",a),...t});X.displayName="DialogHeader";const Ka=({className:a,...t})=>e.jsx("div",{className:x("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t});Ka.displayName="DialogFooter";const q=l.forwardRef(({className:a,...t},s)=>e.jsx(ca,{ref:s,className:x("text-lg font-semibold leading-none tracking-tight",a),...t}));q.displayName=ca.displayName;const he=l.forwardRef(({className:a,...t},s)=>e.jsx(ia,{ref:s,className:x("text-sm text-muted-foreground",a),...t}));he.displayName=ia.displayName;const Ya=gs,Ue=l.forwardRef(({className:a,...t},s)=>e.jsx(da,{ref:s,className:x("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...t}));Ue.displayName=da.displayName;const Ve=l.forwardRef(({className:a,...t},s)=>e.jsx(ma,{ref:s,className:x("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...t}));Ve.displayName=ma.displayName;const nt=l.forwardRef(({className:a,...t},s)=>e.jsx(ua,{ref:s,className:x("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...t}));nt.displayName=ua.displayName;const U=l.forwardRef(({className:a,type:t,...s},r)=>e.jsx("input",{type:t,className:x("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:r,...s}));U.displayName="Input";const Ce=De("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),E=l.forwardRef(({className:a,variant:t,size:s,asChild:r=!1,...o},u)=>{const d=r?Me:"button";return e.jsx(d,{className:x(Ce({variant:t,size:s,className:a})),ref:u,...o})});E.displayName="Button";const O=l.forwardRef(({className:a,children:t,...s},r)=>e.jsxs(xa,{ref:r,className:x("relative overflow-hidden",a),...s,children:[e.jsx(js,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(ke,{}),e.jsx(ys,{})]}));O.displayName=xa.displayName;const ke=l.forwardRef(({className:a,orientation:t="vertical",...s},r)=>e.jsx(fa,{ref:r,orientation:t,className:x("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...s,children:e.jsx(bs,{className:"relative flex-1 rounded-full bg-border"})}));ke.displayName=fa.displayName;const lt=De("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),S=l.forwardRef(({className:a,...t},s)=>e.jsx(ha,{ref:s,className:x(lt(),a),...t}));S.displayName=ha.displayName;const re=l.forwardRef(({className:a,...t},s)=>e.jsx(pa,{className:x("grid gap-2",a),...t,ref:s}));re.displayName=pa.displayName;const F=l.forwardRef(({className:a,...t},s)=>e.jsx(ga,{ref:s,className:x("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...t,children:e.jsx(vs,{className:"flex items-center justify-center",children:e.jsx(Ee,{className:"h-3.5 w-3.5 fill-primary"})})}));F.displayName=ga.displayName;function ge({className:a,classNames:t,showOutsideDays:s=!0,...r}){return e.jsx(ws,{showOutsideDays:s,className:x("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:x(Ce({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:x("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:x(Ce({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...o})=>e.jsx(ja,{className:"h-4 w-4"}),IconRight:({...o})=>e.jsx(Oe,{className:"h-4 w-4"})},...r})}ge.displayName="Calendar";const He=l.forwardRef(({className:a,...t},s)=>e.jsx("textarea",{className:x("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...t}));He.displayName="Textarea";const Ke=Cs,Ye=$s,Se=l.forwardRef(({className:a,align:t="center",sideOffset:s=4,...r},o)=>e.jsx(Ns,{children:e.jsx(ya,{ref:o,align:t,sideOffset:s,className:x("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}));Se.displayName=ya.displayName;function rt(){const{apiUrl:a,setUpdate:t,config:s,userData:r,token:o,userId:u,dialogIsOpen:d,setDialogIsOpen:p}=l.useContext(W),[g,v]=l.useState(!1),[A,D]=l.useState(!0),[h,j]=l.useState({userId:u,_id:"",accountId:"",toAccountId:"",fromAccountId:"",type:"expense",categoryId:"",amount:0,date:new Date,description:""});l.useEffect(()=>{D(!0),r&&r.accounts.length>0&&r.categories.length>0&&(j({userId:u,accountId:r.accounts.length>0?r.accounts[0]._id:"",toAccountId:"",fromAccountId:"",type:"expense",categoryId:r.categories.length>0?r.categories[0]._id:"",amount:0,date:new Date,description:""}),D(!1))},[r]);async function L(){try{if(u&&o&&(h.categoryId!==""||h.toAccountId!=="")&&h.accountId!==""&&h.amount!==0){const n=await P.post(a+"/api/transaction/create",h,s);j({userId:u,accountId:r.accounts.length>0?r.accounts[0]._id:"",toAccountId:"",fromAccountId:"",type:"expense",categoryId:r.categories.length>0?r.categories[0]._id:"",amount:0,date:new Date,description:""}),t(m=>!m),Xe("Event has been created",{description:`Your ${n.data.data.type} was ${n.data.data.amount}$ on ${n.data.data.date.split("T")[0]}`,action:{label:"Undo",onClick:()=>console.log("Undo")}})}else Xe("Error creating the transaction",{}),console.log("Missing Data")}catch(n){console.error("Error adding category:",n)}}return A?e.jsx(H,{className:"w-[180px] h-[40px]"}):e.jsxs(Z,{onOpenChange:n=>p(n),className:"h-[90%] max-w-[320px] md:max-w-lg lg:max-w-2xl",children:[!d&&e.jsx(G,{as:"button",className:"w-[50px] md:w-[200px] h-[50px]",children:e.jsxs(_,{className:"w-full h-full flex justify-center items-center rounded-xl p-2",children:[e.jsx(Is,{className:"md:mr-1 h-6 w-6"}),e.jsx("p",{className:"text-lg font-semibold m-0 hidden md:block",children:"Add Transaction"})]})}),e.jsxs(K,{className:"h-[90%] max-w-[320px] md:max-w-lg lg:max-w-2xl min-h-[610px]",children:[r.accounts.length>0?e.jsx(Ya,{defaultValue:h.accountId,className:"h-[80%] w-full max-w-[275px] md:max-w-lg lg:max-w-2xl",children:e.jsxs(O,{className:"h-[50px] w-full p-1",children:[e.jsx(Ue,{className:"flex justify-center items-center",children:e.jsx("div",{className:"flex flex-row justify-between",children:r.accounts.map((n,m)=>e.jsx(Ve,{name:"account",value:n._id,className:"ml-1 mr-1",style:{color:n.accountColor},onClick:()=>{j(w=>({...w,accountId:n._id}))},children:n.accountTitle},m))})}),e.jsx(ke,{orientation:"horizontal"})]})}):e.jsx("div",{children:"You don't have any account, you must have at least one"}),e.jsxs("div",{className:"h-full w-full md:m-2 flex flex-col items-center justify-between",children:[e.jsx("div",{className:"mb-2 md:m-2 flex justify-center items-center",children:e.jsx(U,{style:{fontSize:"30px",textAlign:"center"},className:"flex justify-center align-center w-[250px] md:w-8/12 h-[70px]",type:"number",min:"0",placeholder:"Transaction Amount",name:"amount",value:h.amount,onChange:n=>{j(m=>({...m,amount:n.target.value}))}})}),e.jsx("div",{className:"block md:hidden",children:e.jsxs(Ke,{open:g,onOpenChange:v,modal:!0,children:[e.jsx(Ye,{className:"w-full",asChild:!0,children:e.jsxs(E,{variant:"outline",className:x("w-full justify-start text-left font-normal",!h.date&&"text-muted-foreground"),children:[e.jsx(ba,{className:"mr-2 h-4 w-4"}),h.date?va(h.date,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(Se,{className:"w-auto p-0",align:"start",children:e.jsx(ge,{mode:"single",selected:h.date,name:"date",disabled:n=>n>new Date||n<new Date("1900-01-01"),onSelect:n=>{n.setHours(12),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),j(m=>({...m,date:n}))},className:"rounded-md border h-full w-full"})})]})}),e.jsxs("div",{className:"flex flex-row justify-center sm:justify-between items-start md:mt-10 mt-2",children:[e.jsxs("div",{className:"flex flex-col justify-start items-start",children:[e.jsx("div",{className:"flex items-center m-2 ml-1",children:e.jsxs(re,{name:"type",defaultValue:h.type,className:"flex flex-row lg:flex-row md:flex-col lg:items-center items-start",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"expense",id:"expense",onClick:()=>{j(n=>({...n,type:"expense"}))}}),e.jsx(S,{htmlFor:"expense",children:"Expense"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"income",id:"income",onClick:()=>{j(n=>({...n,type:"income"}))}}),e.jsx(S,{htmlFor:"income",children:"Income"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"transfer",id:"transfer",onClick:()=>{j(n=>({...n,type:"transfer"}))}}),e.jsx(S,{htmlFor:"transfer",children:"Transfer"})]})]})}),e.jsx(O,{className:"lg:h-[298px] lg:w-[231.36px] md:w-[150px] md:h-[240px] h-[180px] w-full rounded-md border px-2 pt-2 md:px-4 md:pt-4 mr-6",children:e.jsx(re,{name:"category",defaultValue:h.categoryId,children:r.categories.length>0?h.type==="expense"?r.categories.map((n,m)=>{if(n.categoryType==="expense")return e.jsxs("div",{className:"flex flex-row items-center justify-start",children:[e.jsx(F,{style:{backgroundColor:n.categoryColor},className:"w-5 h-5 mr-2",name:"category",value:n._id,id:m,onClick:()=>{j(w=>({...w,categoryId:n._id,toAccountId:"",fromAccountId:""}))}}),e.jsx(S,{htmlFor:m,className:"bg:text-lg",children:n.categoryTitle})]},m)}):h.type==="income"?r.categories.map((n,m)=>{if(n.categoryType==="income")return e.jsxs("div",{className:"flex flex-row items-center justify-start",children:[e.jsx(F,{style:{backgroundColor:n.categoryColor},className:"w-5 h-5 mr-2",name:"category",value:n._id,id:m,onClick:()=>{j(w=>({...w,categoryId:n._id,toAccountId:"",fromAccountId:""}))}}),e.jsx(S,{htmlFor:m,className:"bg:text-lg",children:n.categoryTitle})]},m)}):h.type==="transfer"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",children:"Transfer to Account"}),r.accounts.map((n,m)=>e.jsx("div",{className:"flex flex-row items-center justify-start",children:n._id===h.accountId?e.jsxs(e.Fragment,{children:[e.jsx(F,{style:{backgroundColor:n.accountColor},disabled:!0,className:"w-5 h-5 mr-2",name:"account",value:n._id,id:m,onClick:()=>{j(w=>({...w,toAccountId:n._id,fromAccountId:""}))}}),e.jsx(S,{htmlFor:m,className:"bg:text-lg text-gray-600",children:n.accountTitle})]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{style:{backgroundColor:n.accountColor},className:"w-5 h-5 mr-2",name:"account",value:n._id,id:m,onClick:()=>{j(w=>({...w,toAccountId:n._id,fromAccountId:""}))}}),e.jsx(S,{htmlFor:m,className:"bg:text-lg",children:n.accountTitle})]})},m))]}):e.jsx("div",{children:"Nothing to SHow Here ..."}):e.jsx("div",{children:"You don't have any categories"})})})]}),e.jsx("div",{className:"lg:m-2 hidden md:block",children:e.jsx(ge,{mode:"single",selected:h.date,name:"date",disabled:n=>n>new Date||n<new Date("1900-01-01"),onSelect:n=>{n.setHours(12),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),j(m=>({...m,date:n}))},className:"rounded-md border h-[322px] w-[250px]"})})]}),e.jsxs("div",{className:"lg:w[450px] w-full flex flex-col items-center mt-4",children:[e.jsx(S,{className:"mb-2 ml-1",children:"Description"}),e.jsx(He,{className:"w-full h-[70px]",name:"description",placeholder:"Enter more details here.",value:h.description,onChange:n=>{j(m=>({...m,description:n.target.value}))}})]}),e.jsx("div",{className:"flex justify-center align-center m-2 mt-7",children:e.jsx(E,{variant:"default",onClick:()=>{L()},children:"Submit"})})]})]}),e.jsx(st,{})]})}const ae=l.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:x("rounded-xl border bg-card text-card-foreground shadow",a),...t}));ae.displayName="Card";const se=l.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:x("flex flex-col space-y-1.5 p-6",a),...t}));se.displayName="CardHeader";const te=l.forwardRef(({className:a,...t},s)=>e.jsx("h3",{ref:s,className:x("font-semibold leading-none tracking-tight",a),...t}));te.displayName="CardTitle";const ot=l.forwardRef(({className:a,...t},s)=>e.jsx("p",{ref:s,className:x("text-sm text-muted-foreground",a),...t}));ot.displayName="CardDescription";const ne=l.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:x("p-6 pt-0",a),...t}));ne.displayName="CardContent";const ct=l.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:x("flex items-center p-6 pt-0",a),...t}));ct.displayName="CardFooter";function it(){const{update:a,userData:t}=l.useContext(W),{balanceData:s}=l.useContext(We),[r,o]=l.useState(!0);return l.useEffect(()=>{o(!0),t&&s&&o(!1)},[t,s,a]),r?e.jsx(H,{className:"w-full h-full"}):e.jsxs(ae,{className:"w-full h-full flex flex-col align-stretch justify-stretch",children:[e.jsx(se,{className:"flex align-start justify-start",children:e.jsx(te,{className:"flex flex-row align-center justify-between",children:"Total Balance"})}),e.jsx(ne,{className:"w-full h-full flex justify-center items-center font-bold",children:s.totalBalance>0?e.jsx("p",{className:"lg:text-5xl lg:font-semibold text-3xl",style:{color:"#25ff1dbd"},children:s.totalBalance.toLocaleString()}):e.jsx("p",{className:"lg:text-5xl lg:font-semibold text-3xl",style:{color:"#ff1d1dbd"},children:s.totalBalance.toLocaleString()})})]})}function dt(){const{update:a,userData:t}=l.useContext(W),{balanceData:s}=l.useContext(We),[r,o]=l.useState(!0);return l.useEffect(()=>{o(!0),t&&s&&o(!1)},[t,s,a]),r?e.jsx(H,{className:"w-[380px] h-[165px]"}):e.jsxs(ae,{className:"w-full h-full flex flex-col items-center",children:[e.jsx(se,{className:"w-full flex align-start justify-start",children:e.jsx(te,{className:"flex flex-row align-center justify-between",children:"Income, Expense Balance"})}),e.jsxs(ne,{className:"h-full w-full sm:w-[90%] flex flex-row justify-between items-center",children:[e.jsxs("div",{className:"w-[40%] flex flex-col justify-center items-center mr-10",children:[e.jsx("p",{className:"font-semibold text-lg mb-5",style:{color:"#25ff1dbd"},children:s.totalIncome.toLocaleString()}),e.jsx("p",{className:"font-semibold text-lg",style:{color:"#ff1d1dbd"},children:s.totalExpense.toLocaleString()})]}),e.jsx("div",{className:"w-[60%] h-[80px]",children:e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(Be,{data:[{name:"balance",expense:s.totalExpense,income:s.totalIncome}],children:[e.jsx(fe,{dataKey:"expense",fill:"#ff1d1dbd"}),e.jsx(fe,{dataKey:"income",fill:"#25ff1dbd"})]})})})]})]})}const oe=Ss,ce=Ts,mt=l.forwardRef(({className:a,inset:t,children:s,...r},o)=>e.jsxs(wa,{ref:o,className:x("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",a),...r,children:[s,e.jsx(Oe,{className:"ml-auto h-4 w-4"})]}));mt.displayName=wa.displayName;const ut=l.forwardRef(({className:a,...t},s)=>e.jsx(Na,{ref:s,className:x("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...t}));ut.displayName=Na.displayName;const ee=l.forwardRef(({className:a,sideOffset:t=4,...s},r)=>e.jsx(Ds,{children:e.jsx(Ca,{ref:r,sideOffset:t,className:x("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}));ee.displayName=Ca.displayName;const Y=l.forwardRef(({className:a,inset:t,...s},r)=>e.jsx($a,{ref:r,className:x("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",a),...s}));Y.displayName=$a.displayName;const xt=l.forwardRef(({className:a,children:t,checked:s,...r},o)=>e.jsxs(Ia,{ref:o,className:x("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:s,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Da,{children:e.jsx(Ee,{className:"h-4 w-4"})})}),t]}));xt.displayName=Ia.displayName;const ft=l.forwardRef(({className:a,children:t,...s},r)=>e.jsxs(ka,{ref:r,className:x("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Da,{children:e.jsx(ks,{className:"h-4 w-4 fill-current"})})}),t]}));ft.displayName=ka.displayName;const ue=l.forwardRef(({className:a,inset:t,...s},r)=>e.jsx(Sa,{ref:r,className:x("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",a),...s}));ue.displayName=Sa.displayName;const ht=l.forwardRef(({className:a,...t},s)=>e.jsx(Ta,{ref:s,className:x("-mx-1 my-1 h-px bg-muted",a),...t}));ht.displayName=Ta.displayName;const $e=[{name:"gray 300",value:"#d2d6dc"},{name:"gray 400",value:"#9fa6b2"},{name:"gray 500",value:"#6b7280"},{name:"gray 600",value:"#4b5563"},{name:"gray 700",value:"#374151"},{name:"gray 800",value:"#1f2937"},{name:"gray 900",value:"#111827"},{name:"red 300",value:"#fca5a5"},{name:"red 400",value:"#f87171"},{name:"red 500",value:"#ef4444"},{name:"red 600",value:"#dc2626"},{name:"red 700",value:"#b91c1c"},{name:"red 800",value:"#991b1b"},{name:"red 900",value:"#7f1d1d"},{name:"yellow 300",value:"#fcd34d"},{name:"yellow 400",value:"#fbbf24"},{name:"yellow 500",value:"#f59e0b"},{name:"yellow 600",value:"#d97706"},{name:"yellow 700",value:"#b45309"},{name:"yellow 800",value:"#92400e"},{name:"yellow 900",value:"#78350f"},{name:"green 300",value:"#6ee7b7"},{name:"green 400",value:"#34d399"},{name:"green 500",value:"#10b981"},{name:"green 600",value:"#059669"},{name:"green 700",value:"#047857"},{name:"green 800",value:"#065f46"},{name:"green 900",value:"#064e3b"},{name:"blue 300",value:"#93c5fd"},{name:"blue 400",value:"#60a5fa"},{name:"blue 500",value:"#3b82f6"},{name:"blue 600",value:"#2563eb"},{name:"blue 700",value:"#1d4ed8"},{name:"blue 800",value:"#1e40af"},{name:"blue 900",value:"#1e3a8a"},{name:"indigo 300",value:"#a5b4fc"},{name:"indigo 400",value:"#818cf8"},{name:"indigo 500",value:"#6366f1"},{name:"indigo 600",value:"#4f46e5"},{name:"indigo 700",value:"#4338ca"},{name:"indigo 800",value:"#3730a3"},{name:"indigo 900",value:"#312e81"},{name:"purple 300",value:"#c4b5fd"},{name:"purple 400",value:"#a78bfa"},{name:"purple 500",value:"#8b5cf6"},{name:"purple 600",value:"#7c3aed"},{name:"purple 700",value:"#6d28d9"},{name:"purple 800",value:"#5b21b6"},{name:"purple 900",value:"#4c1d95"},{name:"pink 300",value:"#f9a8d4"},{name:"pink 400",value:"#f472b6"},{name:"pink 500",value:"#ec4899"},{name:"pink 600",value:"#db2777"},{name:"pink 700",value:"#be185d"},{name:"pink 800",value:"#9d174d"},{name:"pink 900",value:"#831843"}],I="b0",Q=[{name:"orange 1",value:`#ffb458${I}`},{name:"orange 2",value:`#ff9c22${I}`},{name:"orange 3",value:`#ff8c00${I}`},{name:"orange 4",value:`#cc7000${I}`},{name:"green 1",value:`#c5ff79${I}`},{name:"green 2",value:`#b1ff4c${I}`},{name:"green 3",value:`#93ff05${I}`},{name:"green 4",value:`#74cc00${I}`},{name:"red 1",value:`#ff6b6b${I}`},{name:"red 2",value:`#ff4040${I}`},{name:"red 3",value:`#ff0f0f${I}`},{name:"red 4",value:`#c40d0d${I}`},{name:"yellow 1",value:`#fff678${I}`},{name:"yellow 2",value:`#fff348${I}`},{name:"yellow 3",value:`#ffee00${I}`},{name:"yellow 4",value:`#dfd000${I}`},{name:"green 5",value:`#7bffa7${I}`},{name:"green 6",value:`#49ff86${I}`},{name:"green 7",value:`#00ff55${I}`},{name:"green 8",value:`#00a537${I}`},{name:"blue 1",value:`#8be9e9${I}`},{name:"blue 2",value:`#56ebeb${I}`},{name:"blue 3",value:`#00eeee${I}`},{name:"blue 4",value:`#00cece${I}`},{name:"blue 5",value:`#6b7aff${I}`},{name:"blue 6",value:`#3546dd${I}`},{name:"blue 7",value:`#0d22e2${I}`},{name:"blue 8",value:`#0013b9${I}`},{name:"purple 1",value:`#d66fff${I}`},{name:"purple 2",value:`#c635ff${I}`},{name:"purple 3",value:`#b700ff${I}`},{name:"purple 4",value:`#8b00c2${I}`},{name:"pink 1",value:`#ff74ae${I}`},{name:"pink 2",value:`#ff3388${I}`},{name:"pink 3",value:`#ff006a${I}`},{name:"pink 4",value:`#d10057${I}`}];function pt(){const{apiUrl:a,update:t,config:s,userData:r,setUserData:o,token:u,userId:d,dialogIsOpen:p,setDialogIsOpen:g}=l.useContext(W),[v,A]=l.useState(null),[D,h]=l.useState(!0),[j,L]=l.useState(null),[n,m]=l.useState({accountTitle:"",accountColor:$e[0].value});l.useEffect(()=>{h(!0),(async()=>{try{const c=await P.get(a+"/api/balance/timeframe-account-balance/"+d,s);if(c.status===200&&r.accounts.length>0){const f=c.data.accountsBalance.reduce((N,i)=>(N[i.accountId]={balance:i.balance},N),{}),y=r.accounts.map(N=>{const i=f[N._id];return i?{...N,...i}:{...N,balance:0}});A(y),h(!1)}else c.status===204&&h(!0)}catch(c){console.log(c),h(!1)}})()},[r,t]);async function w(){try{u&&d&&n.accountTitle.length>0&&(await P.put(a+"/api/profile/add-account/"+d,n,s).then(b=>{o(b.data.data)}),m({accountTitle:"",accountColor:$e[0].value}))}catch(b){console.error("Error posting data:",b)}}async function $(){try{if(u&&d&&j){const b=r.accounts.findIndex(c=>c._id===j._id);if(b!==-1)r.accounts[b]={...r.accounts[b],accountTitle:j.accountTitle,accountColor:j.accountColor};else return r;await P.put(a+"/api/profile/update-account/"+d,r,s).then(c=>{o(c.data.data)})}}catch(b){console.error("Error posting data:",b)}}async function k(b){try{u&&d&&await P.delete(`${a}/api/profile/remove-account/${d}/?accountId=${b}`,s).then(c=>{o(c.data.data)})}catch(c){console.error("Error posting data:",c)}}const T=Math.PI/180,M=({cx:b,cy:c,midAngle:f,innerRadius:y,outerRadius:N,percent:i,index:C})=>{const R=y+(N-y)*.5,le=b+R*Math.cos(-f*T),z=c+R*Math.sin(-f*T);return e.jsx("text",{x:le,y:z,fill:"white",textAnchor:le>b?"start":"end",dominantBaseline:"central",children:`${(i*100).toFixed(0)}%`})};return D?e.jsx(H,{className:"w-[641.3px] h-[340px]"}):e.jsxs(ae,{className:"w-full h-full",children:[e.jsxs("div",{className:" flex flex-row justify-between items-center mb-0",children:[e.jsx(se,{className:"w-[50%] flex items-start",children:e.jsx(te,{children:"Accounts"})}),e.jsxs(Z,{onOpenChange:b=>g(b),className:"w-[50%] flex items-end",children:[e.jsx(G,{children:e.jsx(_,{className:"w-[50px] h-[35px] mt-[15px] mr-[30px] justify-center align-center hover:bg-accent",variant:"ghost",children:e.jsx(Aa,{className:"h-4 w-4"})})}),e.jsxs(K,{className:"w-[80%] max-w-[500px]",children:[e.jsx(X,{children:e.jsx(q,{children:"Add New Account"})}),e.jsxs("div",{className:"flex flex-row justify-center items-center mt-[25px]",children:[e.jsxs(oe,{className:"colorDiv",children:[e.jsx(ce,{children:e.jsx("div",{className:"w-8 h-7 rounded-md mr-2 colorDiv",style:{backgroundColor:n.accountColor}})}),e.jsxs(ee,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex justify-between items-center",children:["Current Color",e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:n.accountColor}})]})}),e.jsx(O,{className:"h-72 w-[200px] rounded-md border",children:e.jsx("div",{className:"grid grid-cols-4 gap-[1px]",children:Q.length>0?Q.map((b,c)=>e.jsxs(Y,{onClick:()=>m(f=>({...f,accountColor:b.value})),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:`${b.value}`}})}),c%4===3&&e.jsx("div",{className:"w-full"})," "]},b.value)):e.jsx("div",{})})})]})]}),e.jsx(U,{className:"w-[200px]",defaultValue:n.accountTitle,placeholder:"Account Name",onChange:b=>m(c=>({...c,accountTitle:b.target.value}))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(V,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",onClick:()=>w(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Save"})})})})]})]})]}),e.jsxs(ne,{style:{width:"100%",height:"250px"},className:"flex flex-row m-0",children:[e.jsx("div",{style:{width:"50%",height:"256px"},children:e.jsx(O,{className:"h-[90%] w-full overflow-hidden",children:v?v.map(b=>e.jsxs(Z,{onOpenChange:c=>g(c),children:[e.jsxs(G,{onClick:()=>{L(b)},className:"flex w-full py-[10px] px-[5px] rounded-md hover:bg-accent justify-between",children:[e.jsxs("div",{className:"flex flex-row",children:[e.jsx("div",{className:"flex w-6 h-6 mr-2 rounded-md colorDiv",style:{backgroundColor:`${b.accountColor}`}}),e.jsx("p",{className:"w-[60%] flex justify-start overflow-hidden whitespace-nowrap text-overflow-ellipsis",children:b.accountTitle})]}),b.balance>0?e.jsx("p",{className:"w-[40%] overflow-hidden",style:{color:"#25ff1dbd"},children:b.balance.toFixed(2)}):e.jsx("p",{className:"w-[40%] overflow-hidden",style:{color:"#ff1d1dbd"},children:b.balance.toFixed(2)})]}),j?e.jsxs(K,{className:"w-[80%] max-w-[500px]",children:[e.jsxs(X,{children:[e.jsx(q,{children:j.accountTitle}),e.jsx(he,{children:"Make Changes and Save"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex flex-row justify-center items-center my-[25px]",children:[e.jsxs(oe,{className:"colorDiv",children:[e.jsx(ce,{children:e.jsx("div",{className:"w-8 h-7 rounded-md mr-2 colorDiv",style:{backgroundColor:j.accountColor}})}),e.jsxs(ee,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex justify-between items-center",children:["Current Color",e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:j.accountColor}})]})}),e.jsx(O,{className:"h-72 w-[200px] rounded-md border",children:e.jsx("div",{className:"grid grid-cols-4 gap-[1px]",children:Q.length>0?Q.map((c,f)=>e.jsxs(Y,{onClick:()=>L(y=>({...y,accountColor:c.value})),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:`${c.value}`}})}),f%4===3&&e.jsx("div",{className:"w-full"})," "]},c.value)):e.jsx("div",{})})})]})]}),e.jsx(U,{className:"w-[200px]",defaultValue:j.accountTitle,placeholder:"Account Name",onChange:c=>L(f=>({...f,accountTitle:c.target.value}))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(Z,{children:[e.jsx(G,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})}),e.jsxs(K,{className:"w-[80%] max-w-[500px]",children:[e.jsxs(X,{children:[e.jsxs(q,{children:["Delete the ",j.accountTitle," ","account?"]}),e.jsxs(he,{children:["This action cannot be undone and it will permanently delete your"," ",j.accountTitle," Account. Are you sure?"]})]}),e.jsxs("div",{className:"flex flex-row justify-end",children:[e.jsx(V,{children:e.jsx(_,{className:"w-[100px] h-[37px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Cancel"})})}),e.jsx(V,{children:e.jsx(_,{className:"ml-[10px] w-[100px] h-[37px] flex justify-center items-center",variant:"destructive",onClick:()=>k(j._id),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})})]})]})]}),e.jsx(V,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",onClick:()=>$(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Save"})})})]})]})]}):e.jsx(e.Fragment,{})]},b._id)):e.jsx("div",{children:"Loading..."})})}),e.jsx("div",{className:"flex justify-start align-start items-start",style:{width:"50%",height:"256px"},children:e.jsx(de,{children:e.jsx(Fe,{children:e.jsx(Pe,{data:v,cx:"50%",cy:"50%",labelLine:!1,label:M,outerRadius:"200px",fill:"#8884d8",dataKey:"balance",children:v.map((b,c)=>e.jsx(Le,{fill:b.accountColor},b._id))})})})})]})]})}const qe="#25ff1dbd",Qe="#ff1d1dbd";function gt(){const{apiUrl:a,update:t,config:s,userData:r,userId:o,dims:u}=l.useContext(W),[d,p]=l.useState(null),[g,v]=l.useState(!0);return l.useEffect(()=>{v(!0),(async()=>{try{const D=await P.get(a+"/api/balance/last90days-expense-income-balance/"+o,s);if(D.status===200){const h=D.data.data.map(j=>({...j,date:j.date.split("T")[0].split("-")[2]}));p(h),v(!1)}else D.status===204&&v(!0)}catch(D){console.log(D),v(!1)}})()},[r,o,t]),g?e.jsx(H,{className:"w-[700px] h-[515px]"}):e.jsxs(ae,{className:"w-full h-full flex flex-col align-stretch justify-stretch",children:[e.jsx(se,{className:"flex align-start justify-start",children:e.jsx(te,{className:"flex flex-row align-center justify-between",children:"Last 30 Days"})}),e.jsxs(ne,{className:"w-full h-full flex flex-col justify-center items-center",children:[e.jsx(de,{children:e.jsxs(Be,{data:d,syncId:"anyId",margin:u.width>768&&{top:10,right:30,left:0,bottom:0},children:[e.jsx(_e,{dataKey:"date"}),u.width>768&&e.jsx(Re,{}),e.jsx(ze,{}),e.jsx(fe,{type:"monotone",dataKey:"expense",stroke:Qe,fill:Qe}),e.jsx(fe,{type:"monotone",dataKey:"income",stroke:qe,fill:qe}),e.jsx(As,{height:30,startIndex:60,dataKey:"date",fill:"#c9c9c9ce",stroke:"c9c9c9b2"})]})}),e.jsx(de,{children:e.jsxs(Fs,{data:d,syncId:"anyId",margin:u.width>768&&{top:10,right:30,left:0,bottom:0},children:[e.jsx(_e,{dataKey:"date"}),u.width>768&&e.jsx(Re,{}),e.jsx(ze,{}),e.jsx(Ps,{type:"monotone",dataKey:"balance",stroke:"#838383",fill:"#9494949d"})]})})]})]})}const Za=({className:a,...t})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:x("mx-auto flex w-full justify-center",a),...t});Za.displayName="Pagination";const Ga=l.forwardRef(({className:a,...t},s)=>e.jsx("ul",{ref:s,className:x("flex flex-row items-center gap-1",a),...t}));Ga.displayName="PaginationContent";const ie=l.forwardRef(({className:a,...t},s)=>e.jsx("li",{ref:s,className:x("",a),...t}));ie.displayName="PaginationItem";const xe=({className:a,isActive:t,size:s="icon",...r})=>e.jsx("a",{"aria-current":t?"page":void 0,className:x(Ce({variant:t?"outline":"ghost",size:s}),a),...r});xe.displayName="PaginationLink";const Wa=({className:a,...t})=>e.jsxs(xe,{"aria-label":"Go to previous page",size:"default",className:x("gap-1 pl-2.5",a),...t,children:[e.jsx(ja,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});Wa.displayName="PaginationPrevious";const Ja=({className:a,...t})=>e.jsxs(xe,{"aria-label":"Go to next page",size:"default",className:x("gap-1 pr-2.5",a),...t,children:[e.jsx("span",{children:"Next"}),e.jsx(Oe,{className:"h-4 w-4"})]});Ja.displayName="PaginationNext";const Xa=({className:a,...t})=>e.jsxs("span",{"aria-hidden":!0,className:x("flex h-9 w-9 items-center justify-center",a),...t,children:[e.jsx(Ls,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]});Xa.displayName="PaginationEllipsis";const jt="#25ff1dbd",yt="#ff1d1dbd";function bt(){const{apiUrl:a,update:t,setUpdate:s,config:r,userData:o,token:u,userId:d,setDialogIsOpen:p}=l.useContext(W),[g,v]=l.useState(null),[A,D]=l.useState(!0),[h,j]=l.useState(null),[L,n]=l.useState(null),[m,w]=l.useState(null),[$,k]=l.useState(!1);async function T(y){try{const N=await P.get(y,r);if(N.status===200&&o.categories.length>0&&o.accounts.length>0&&N.data.data){let i=N.data.data;const C=o.accounts.reduce((z,J)=>(z[J._id]={accountColor:J.accountColor,accountTitle:J.accountTitle},z),{}),R=o.categories.reduce((z,J)=>(z[J._id]={categoryColor:J.categoryColor,categoryTitle:J.categoryTitle},z),{}),le=i.map(z=>{const J=C[z.accountId],os=z.toAccountId?C[z.toAccountId]:"",cs=R[z.categoryId];return{...z,...J,...cs,toAccountTitle:os.accountTitle}});le.sort((z,J)=>new Date(J.date)-new Date(z.date)),w(N.data.currentPage),n(N.data.totalPages),v(le),D(!1)}else N.status===204&&D(!0)}catch(N){console.log(N),o&&D(!1)}}l.useEffect(()=>{D(!0),T(a+"/api/transaction/read/"+d)},[o,t]);function M(){const{...y}=h,N={...y};try{d&&u&&N?(P.put(a+"/api/transaction/update/"+d,N,r).then(i=>{console.log("Updated transaction")}),s(i=>!i)):console.log("Missing Data")}catch(i){console.error("Error adding category:",i)}}async function b(){try{const y=await P.delete(a+"/api/transaction/delete/"+d+"/"+h._id,r);s(N=>!N)}catch(y){console.log(y)}}const c=y=>{const N=[];return N.push(e.jsx(ie,{children:e.jsx(xe,{href:"#",onClick:i=>{f(i,m),i.preventDefault()},children:m})},m)),m>1&&N.unshift(e.jsx(ie,{children:e.jsx(xe,{href:"#",onClick:i=>{f(i,m-1),i.preventDefault()},children:m-1})},m-1)),m<y&&N.push(e.jsx(ie,{children:e.jsx(xe,{href:"#",onClick:i=>{f(i,m+1),i.preventDefault()},children:m+1})},m+1)),N};function f(y,N){T(`${a}/api/transaction/read/${d}?page=${N}`)}return A&&!g?e.jsx(H,{className:"w-[390px] h-[1150px]"}):e.jsxs(ae,{className:"w-full h-full flex flex-col align-stretch justify-stretch",children:[e.jsx(se,{className:"flex align-start justify-start h-auto",children:e.jsx(te,{className:"flex flex-row align-center justify-between mb-[10px]",children:"History"})}),e.jsxs(ne,{className:"flex flex-col h-full w-full",children:[e.jsx(O,{className:"flex justify-center align-start w-full h-[1050px] ml-0",children:g?g.map((y,N)=>e.jsxs(Z,{onOpenChange:i=>p(i),className:"h-[90%] max-w-[320px] md:max-w-lg lg:max-w-2xl",children:[e.jsx(G,{className:"w-full",onClick:()=>j(y),children:e.jsxs("div",{className:"flex flex-row items-center justify-between  rounded-md hover:bg-accent",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:N+1}),e.jsxs("div",{className:"flex flex-col w-full mr-[10px]",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between text-sm text-muted-foreground",children:[y.date.split("T")[0],e.jsx("div",{className:"flex flex-row items-end justify-end text-sm text-muted-foreground",children:y.accountTitle})]}),y.type==="expense"?e.jsxs("div",{className:"flex flex-row  items-center justify-between m-[5px] ml-[20px]",children:[e.jsx("div",{className:"flex flex-row items-start justify-start",style:{fontSize:"20px",color:yt},children:y.amount}),e.jsx("div",{className:"flex flex-row items-center justify-center mr-[20px]",children:y.categoryTitle})]}):y.type==="income"?e.jsxs("div",{className:"flex flex-row  items-center justify-between m-[5px] ml-[20px]",children:[e.jsx("div",{className:"flex flex-row items-start justify-start",style:{fontSize:"20px",color:jt},children:y.amount}),e.jsx("div",{className:"flex flex-row items-center justify-center mr-[20px]",children:y.categoryTitle})]}):e.jsxs("div",{className:"flex flex-row  items-center justify-between m-[5px] ml-[20px] mr-0",children:[e.jsx("div",{className:"flex flex-row items-start justify-start",style:{fontSize:"20px"},children:y.amount}),e.jsxs("div",{className:"flex flex-row items-center justify-center text-sm text-muted-foreground",children:["-",">"," ",y.toAccountTitle]})]}),e.jsx("div",{className:"flex justify-end text-sm text-muted-foreground",children:"Balance: 100"}),e.jsx("div",{className:"w-full h-[0px] m-[5px] ",style:{borderBottom:"0.5px solid #9494944d",display:"grid",justifySelf:"center"}})]},y._id)]})}),e.jsx(K,{className:"h-[90%] max-w-[320px] md:max-w-lg lg:max-w-2xl min-h-[610px]",children:h?e.jsxs(e.Fragment,{children:[e.jsx(Ya,{defaultValue:h.accountId,className:"h-[80%] w-full max-w-[275px] md:max-w-lg lg:max-w-2xl",children:e.jsxs(O,{className:"h-[50px] w-full p-1",children:[e.jsx(Ue,{className:"flex justify-center items-center",children:e.jsx("div",{className:"flex flex-row justify-between items-center",children:o.accounts.length>0?o.accounts.map((i,C)=>e.jsx(Ve,{name:"account",value:i._id,className:"ml-1 mr-1",style:{color:i.accountColor},onClick:()=>{j(R=>({...R,accountId:i._id}))},children:i.accountTitle},C)):e.jsx("div",{})})}),e.jsx(ke,{orientation:"horizontal"})]})}),e.jsxs("div",{className:"h-full w-full md:m-2 flex flex-col items-center justify-between",children:[e.jsx("div",{className:"mb-2 md:m-2 flex justify-center items-center",children:e.jsx(U,{style:{height:"70px",width:"60%",fontSize:"30px",textAlign:"center"},className:"flex justify-center align-center w-[250px] md:w-8/12 h-[70px]",type:"number",min:"0",placeholder:"Transaction Amount",name:"amount",value:h.amount,onChange:i=>{j(C=>({...C,amount:i.target.value}))}})}),e.jsx("div",{className:"block md:hidden",children:e.jsxs(Ke,{modal:!0,open:$,onOpenChange:k,children:[e.jsx(Ye,{className:"w-full",asChild:!0,children:e.jsxs(E,{variant:"outline",className:x("w-full justify-start text-left font-normal",!h.date&&"text-muted-foreground"),children:[e.jsx(ba,{className:"mr-2 h-4 w-4"}),h.date?va(h.date,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(Se,{className:"w-auto p-0",align:"start",children:e.jsx(ge,{mode:"single",selected:h.date,name:"date",disabled:i=>i>new Date||i<new Date("1900-01-01"),onSelect:i=>{i.setHours(12),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),j(C=>({...C,date:i}))},className:"rounded-md border h-full w-full",initialFocus:!0})})]})}),e.jsxs("div",{className:"flex flex-row justify-center sm:justify-between items-start md:mt-10 mt-2",children:[e.jsxs("div",{className:"flex flex-col justify-start items-start",children:[e.jsx("div",{className:"flex items-center m-2 ml-1",children:e.jsxs(re,{name:"type",defaultValue:h.type,className:"flex flex-row lg:flex-row md:flex-col lg:items-center items-start",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"expense",id:"expense",onClick:()=>{j(i=>({...i,type:"expense"}))}}),e.jsx(S,{htmlFor:"expense",children:"Expense"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"income",id:"income",onClick:()=>{j(i=>({...i,type:"income"}))}}),e.jsx(S,{htmlFor:"income",children:"Income"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"transfer",id:"transfer",onClick:()=>{j(i=>({...i,type:"transfer"}))}}),e.jsx(S,{htmlFor:"transfer",children:"Transfer"})]})]})}),e.jsx(O,{className:"lg:h-[298px] lg:w-[231.36px] md:w-[150px] md:h-[240px] h-[180px] w-full rounded-md border px-2 pt-2 md:px-4 md:pt-4 mr-6",children:e.jsx(re,{name:"category",defaultValue:h.categoryId,children:h.type==="expense"&&o.categories.length>0?o.categories.map((i,C)=>{if(i.categoryType==="expense")return e.jsxs("div",{className:"flex flex-row items-center justify-start",children:[e.jsx(F,{style:{backgroundColor:i.categoryColor},className:"w-5 h-5 mr-2",name:"category",value:i._id,id:C,onClick:()=>{j(R=>({...R,categoryId:i._id,toAccountId:"",fromAccountId:""}))}}),e.jsx(S,{htmlFor:C,className:"bg:text-lg",children:i.categoryTitle})]},C)}):h.type==="income"&&o.categories.length>0?o.categories.map((i,C)=>{if(i.categoryType==="income")return e.jsxs("div",{className:"flex flex-row items-center justify-start",children:[e.jsx(F,{style:{backgroundColor:i.categoryColor},className:"w-5 h-5 mr-2",name:"category",value:i._id,id:C,onClick:()=>{j(R=>({...R,categoryId:i._id,toAccountId:"",fromAccountId:""}))}}),e.jsx(S,{htmlFor:C,className:"bg:text-lg",children:i.categoryTitle})]},C)}):h.type==="transfer"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",children:"Transfer to Account"}),o.accounts.map((i,C)=>e.jsx("div",{className:"flex flex-row items-center justify-start",children:i._id===h.accountId?e.jsxs(e.Fragment,{children:[e.jsx(F,{style:{backgroundColor:i.accountColor},disabled:!0,className:"w-5 h-5 mr-2",name:"account",value:i._id,id:C,onClick:()=>{j(R=>({...R,toAccountId:i._id,fromAccountId:""}))}}),e.jsx(S,{htmlFor:C,className:"bg:text-lg text-gray-600",children:i.accountTitle})]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{style:{backgroundColor:i.accountColor},className:"w-5 h-5 mr-2",name:"account",value:i._id,id:C,onClick:()=>{j(R=>({...R,toAccountId:i._id,fromAccountId:""}))}}),e.jsx(S,{htmlFor:C,className:"bg:text-lg",children:i.accountTitle})]})},C))]}):e.jsx("div",{children:"Nothing to SHow Here ..."})})})]}),e.jsx("div",{className:"lg:m-2 hidden md:block",children:e.jsx(ge,{mode:"single",selected:h.date,name:"date",value:h.date,initialFocus:!0,disabled:i=>i>new Date||i<new Date("1900-01-01"),onSelect:i=>{j(C=>({...C,date:i}))},className:"rounded-md border h-[322px] w-[250px]"})})]}),e.jsxs("div",{className:"lg:w[450px] w-full flex flex-col items-center mt-4",children:[e.jsx(S,{className:"mb-2 ml-1",children:"Description"}),e.jsx(He,{className:"w-full h-[70px]",name:"description",placeholder:"Enter more details here.",value:h.description,onChange:i=>{j(C=>({...C,description:i.target.value}))}})]}),e.jsxs("div",{className:"w-full flex justify-between align-center m-2 mt-7",children:[e.jsxs(Z,{className:"w-[50%] flex items-end",children:[e.jsx(G,{children:e.jsx(_,{className:"w-[100px] h-[38px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})}),e.jsxs(K,{className:"w-[80%] max-w-[500px]",children:[e.jsxs(X,{children:[e.jsx(q,{children:"Are you sure you want to delete the transaction?"}),e.jsx(he,{children:"This action cannot be undone. This will permanently delete the transaction."})]}),e.jsx(Ka,{children:e.jsx(V,{asChild:!0,children:e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(E,{className:"w-[100px] flex align-end items-end",variant:"outline",children:"cancel"}),e.jsx(E,{className:"w-[100px] flex align-end items-end ml-[10px]",variant:"destructive",onClick:()=>b(),children:"delete"})]})})})]})]}),e.jsx(V,{asChild:!0,children:e.jsx(E,{variant:"default",onClick:M,children:"Save Changes"})})]})]})]}):e.jsx("div",{children:"Loading ..."})})]},N)):e.jsx(e.Fragment,{})}),e.jsx(Za,{className:"felx justify-center align-end items-end h-auto mt-[20px] w-11/12",children:e.jsxs(Ga,{children:[e.jsx(ie,{children:e.jsx(Wa,{onClick:y=>{f(y,m-1),y.preventDefault()},href:"#"})}),c(L),e.jsx(ie,{children:e.jsx(Xa,{})}),e.jsx(ie,{children:e.jsx(Ja,{onClick:y=>{m<L&&f(y,m+1),y.preventDefault()},href:"#"})})]})})]})]})}const qa=Vs,Qa=Hs,Ze=l.forwardRef(({className:a,children:t,...s},r)=>e.jsxs(Fa,{ref:r,className:x("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...s,children:[t,e.jsx(_s,{asChild:!0,children:e.jsx(Rs,{className:"h-4 w-4 opacity-50"})})]}));Ze.displayName=Fa.displayName;const es=l.forwardRef(({className:a,...t},s)=>e.jsx(Pa,{ref:s,className:x("flex cursor-default items-center justify-center py-1",a),...t,children:e.jsx(zs,{})}));es.displayName=Pa.displayName;const as=l.forwardRef(({className:a,...t},s)=>e.jsx(La,{ref:s,className:x("flex cursor-default items-center justify-center py-1",a),...t,children:e.jsx(Ms,{})}));as.displayName=La.displayName;const Ge=l.forwardRef(({className:a,children:t,position:s="popper",...r},o)=>e.jsx(Es,{children:e.jsxs(_a,{ref:o,className:x("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:s,...r,children:[e.jsx(es,{}),e.jsx(Os,{className:x("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(as,{})]})}));Ge.displayName=_a.displayName;const vt=l.forwardRef(({className:a,...t},s)=>e.jsx(Ra,{ref:s,className:x("px-2 py-1.5 text-sm font-semibold",a),...t}));vt.displayName=Ra.displayName;const B=l.forwardRef(({className:a,children:t,...s},r)=>e.jsxs(za,{ref:r,className:x("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Bs,{children:e.jsx(Ee,{className:"h-4 w-4"})})}),e.jsx(Us,{children:t})]}));B.displayName=za.displayName;const wt=l.forwardRef(({className:a,...t},s)=>e.jsx(Ma,{ref:s,className:x("-mx-1 my-1 h-px bg-muted",a),...t}));wt.displayName=Ma.displayName;function Nt(){const{apiUrl:a,update:t,config:s,userData:r,userId:o,balanceData:u,dims:d}=l.useContext(W);let p={};const[g,v]=l.useState(!0),[A,D]=l.useState(null),[h,j]=l.useState(null),[L,n]=l.useState(null),[m,w]=l.useState("this_month"),[$,k]=l.useState();async function T(c){try{const f=await P.get(`${a}/api/balance/category-analytic/${o}?period=${c}`,s);if(f.status===200&&r.categories.length>0&&r.accounts.length>0&&(f.data.pieData||f.data.barData)){let y=f.data.pieData.income,N=f.data.pieData.expense,i=f.data.barData;r.categories.map(C=>{p[C._id]={color:C.categoryColor,title:C.categoryTitle}}),k(p),y=y.map(C=>({...p[C.categoryId],...C})),N=N.map(C=>({...p[C.categoryId],...C})),n(i),D(N),j(y),v(!1)}else f.status===204&&v(!0)}catch(f){console.log(f),v(!1)}}l.useEffect(()=>{v(!0),T(m),r&&u&&v(!1)},[r,t]);const M=Math.PI/180,b=({cx:c,cy:f,midAngle:y,innerRadius:N,outerRadius:i,percent:C})=>{const R=N+(i-N)*.5,le=c+R*Math.cos(-y*M),z=f+R*Math.sin(-y*M);return e.jsx("text",{x:le,y:z,fill:"white",textAnchor:le>c?"start":"end",dominantBaseline:"central",children:`${(C*100).toFixed(0)}%`})};return e.jsxs(ae,{className:"w-full h-full flex flex-col",children:[e.jsxs("div",{className:" flex flex-row justify-between items-center",children:[e.jsx(se,{className:"w-[50%] flex items-start",children:e.jsx(te,{children:"Category Analytics"})}),e.jsxs(qa,{onValueChange:c=>{w(c),T(c)},defaultValue:m,children:[e.jsx(Ze,{className:"w-[130px] mr-[30px] hover:bg-accent",children:e.jsx(Qa,{placeholder:"Choose Period"})}),e.jsxs(Ge,{children:[e.jsx(B,{value:"this_week",children:"This Week"}),e.jsx(B,{value:"this_month",children:"This Month"}),e.jsx(B,{value:"last_3_months",children:"Last 3 Months"}),e.jsx(B,{value:"last_6_months",children:"Last 6 Months"}),e.jsx(B,{value:"this_year",children:"This Year"}),e.jsx(B,{disabled:!0,value:"max",children:"Custom"})]})]})]}),g&&d.width>10?e.jsxs("div",{className:"flex lg:flex-row flex-col justify-between px-[40px]",children:[e.jsx("div",{className:"ml-[55px]",children:e.jsx(H,{className:"lg:w-12/4 w-full lg:h-[350px]"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(H,{className:"w-[160px] h-[160px] rounded-full mx-[15px] mb-[20px] mt-[8px]"}),e.jsx(H,{className:"w-[160px] h-[160px] rounded-full mx-[15px]"})]})]}):e.jsxs(ne,{className:"flex flex-col lg:flex-row justify-center items-center w-full h-full",children:[e.jsx("div",{className:"flex flex-row lg:flex-col w-full h-[60%] lg:w-[75%] lg:h-full",children:e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(Be,{data:L,margin:d.width>768&&{top:20,right:30,left:20,bottom:5},children:[e.jsx(_e,{dataKey:"gap"}),d.width>768&&e.jsx(Re,{}),e.jsx(ze,{labelFormatter:(c,f)=>(f.forEach(y=>{y.name=$[y.dataKey].title}),{keys:c,values:f})}),r.categories.length>0?r.categories.map((c,f)=>c.categoryType==="expense"?e.jsx(fe,{dataKey:c._id,stackId:"expense",fill:c.categoryColor},f):c.categoryType==="income"?e.jsx(fe,{dataKey:c._id,stackId:"income",fill:c.categoryColor},f):e.jsx(e.Fragment,{})):e.jsx("div",{})]})})}),e.jsxs("div",{className:"flex flex-row lg:flex-col w-full h-[40%] lg:w-[25%] lg:h-[100%]",children:[e.jsx(de,{width:"100%",height:"100%",children:e.jsx(Fe,{children:e.jsx(Pe,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:b,fill:"#8884d8",dataKey:"amount",children:h?h.map((c,f)=>e.jsx(Le,{fill:c.color},c.categoryId)):e.jsx(H,{})})})}),e.jsx(de,{width:"100%",height:"100%",children:e.jsx(Fe,{children:e.jsx(Pe,{data:A,cx:"50%",cy:"50%",labelLine:!1,label:b,fill:"#8884d8",dataKey:"amount",children:A?A.map((c,f)=>e.jsx(Le,{fill:c.color},c.categoryId)):e.jsx(H,{})})})})]})]})]})}const ea="#25ff1dbd",Ae="#ff1d1dbd";function Ct(){const{apiUrl:a,update:t,config:s,userData:r,userId:o,dims:u}=l.useContext(W),[d,p]=l.useState(null),[g,v]=l.useState("this_month"),[A,D]=l.useState(!0);async function h(n){try{const m=await P.get(a+"/api/balance/sankey/"+o+`?period=${n}`,s);if(m.status===200&&r.accounts.length>0&&r.categories.length>0&&m.data.sankeyData){let w={};r.accounts.map(c=>{w[c._id]={color:c.accountColor,title:c.accountTitle}});let $={};r.categories.map(c=>{$[c._id]={color:c.categoryColor,title:c.categoryTitle}});let k=[],T=[],M=0,b=0;m.data.sankeyData.forEach(c=>{if(c.type==="initial"&&w[c.accountId]){const f=c.totalAmount;f>=0?(k.push({id:`${w[c.accountId].title} (initial)`,nodeColor:w[c.accountId].color}),T.push({source:`${w[c.accountId].title} (initial)`,target:"Inflow",value:f})):f<0&&(k.map(y=>y.id==="Old Debts"&&y.id!==w[c.accountId].title)?(k.push({id:`${w[c.accountId].title} (initial)`,nodeColor:w[c.accountId].color}),k.push({id:"Old Debts",nodeColor:Ae}),T.push({source:"Inflow",target:"Old Debts",value:-f}),T.push({source:"Old Debts",target:`${w[c.accountId].title} (initial)`,value:-f})):k.map(y=>y.id==="Old Debts")&&(T.push({source:"Inflow",target:"Old Debts",value:-f}),T.push({source:"Old Debts",target:`${w[c.accountId].title} (initial)`,value:-f})))}else if(c.type==="final"&&w[c.accountId]){const f=c.totalAmount;f>=0?(k.push({id:w[c.accountId].title,nodeColor:w[c.accountId].color}),T.push({source:"Total Income",target:w[c.accountId].title,value:f})):f<0&&(k.push({id:w[c.accountId].title,nodeColor:w[c.accountId].color}),k.push({id:"Current Debts",nodeColor:Ae}),T.push({source:w[c.accountId].title,target:"Current Debts",value:f}),T.push({source:"Current Debts",target:"Inflow",value:f})),b+=f>0?f:-f}else if(c.type==="income"&&$[c.categoryId]){const f=c.totalAmount;k.push({id:$[c.categoryId].title,nodeColor:$[c.categoryId].color}),T.push({source:$[c.categoryId].title,target:"Inflow",value:f})}else if(c.type==="expense"&&$[c.categoryId]){const f=c.totalAmount;M+=f>0?f:-f,k.push({id:$[c.categoryId].title,nodeColor:$[c.categoryId].color}),T.push({source:"Outflow",target:$[c.categoryId].title,value:f})}else console.log("type undefined")}),k.push({id:"Inflow",nodeColor:ea},{id:"Outflow",nodeColor:Ae},{id:"Total Income",nodeColor:ea}),T.push({source:"Inflow",target:"Outflow",value:M},{source:"Inflow",target:"Total Income",value:b}),p({nodes:k,links:T}),D(!1)}else D(!0)}catch(m){console.error(m),D(!1)}}const j=Math.max(8,u.width/100),L=Math.max(16,u.width/50);return l.useEffect(()=>{h(g)},[r,t]),A?e.jsx(H,{className:"w-[951.3px] h-[650px]"}):e.jsxs(ae,{className:" w-full h-full flex flex-col align-stretch justify-stretch",children:[e.jsxs("div",{className:" flex flex-row justify-between items-center",children:[e.jsx(se,{className:" w-[50%] flex items-start",children:e.jsx(te,{children:"Cash Flow"})}),e.jsxs(qa,{onValueChange:n=>{v(n),h(n)},defaultValue:g,children:[e.jsx(Ze,{className:" w-[130px] mt-[15px] mr-[30px] hover:bg-accent",children:e.jsx(Qa,{placeholder:"Choose Period"})}),e.jsxs(Ge,{children:[e.jsx(B,{value:"this_week",children:"This Week"}),e.jsx(B,{value:"this_month",children:"This Month"}),e.jsx(B,{value:"last_3_months",children:"Last 3 Months"}),e.jsx(B,{value:"last_6_months",children:"Last 6 Months"}),e.jsx(B,{value:"this_year",children:"This Year"}),e.jsx(B,{value:"last_3_years",children:"Last 3 Years"}),e.jsx(B,{disabled:!0,value:"max",children:"Custom"})]})]})]}),e.jsx(ne,{className:" flex justify-center items-center w-[100%] h-full",children:e.jsx(Ks,{data:d,align:"justify",colors:n=>n.nodeColor,nodeOpacity:1,nodeHoverOthersOpacity:.35,nodeThickness:j,nodeSpacing:L,nodeBorderWidth:0,nodeBorderColor:{from:"color",modifiers:[["darker",.8]]},nodeBorderRadius:2,linkOpacity:.5,linkHoverOthersOpacity:.1,linkContract:3,enableLinkGradient:!0,labelPosition:"outside",labelOrientation:"vertical",labelPadding:16,borderColor:{theme:"background"},labelTextColor:{from:"color",modifiers:[["darker",1]]},linkColor:n=>n.source.nodeColor})})]})}function $t(){const{apiUrl:a,config:t,userData:s,setUserData:r,userId:o,setDialogIsOpen:u}=l.useContext(W),[d,p]=l.useState({categoryTitle:"",categoryColor:$e[0].value,categoryType:"expense"}),[g,v]=l.useState(null),[A,D]=l.useState(!0);l.useEffect(()=>{D(!0),s.accounts.length>0&&D(!1)},[s]);async function h(){if(o&&d.categoryTitle)try{await P.put(a+"/api/profile/add-category/"+o,d,t).then(n=>{r(n.data.data)})}catch(n){console.error("Error posting data:",n)}else console.log("insert category name");p({categoryTitle:"",categoryColor:$e[0].value,categoryType:"expense"})}async function j(){if(o&&g._id)try{await P.put(a+"/api/profile/update-category/"+o,g,t).then(n=>{r(n.data.data)})}catch(n){console.error(n)}else console.log("error updating the category")}async function L(){try{const n=await P.delete(a+"/api/profile/remove-category/"+o+"/"+g._id,t);r(n.data.data)}catch(n){console.log(n)}}return A?e.jsx(H,{className:"w-[641.3] h-[340px]"}):e.jsxs(ae,{className:"w-full h-full",children:[e.jsxs("div",{className:" flex flex-row justify-between items-center",children:[e.jsx(se,{className:"w-[50%] flex items-start",children:e.jsx(te,{children:"Categoies"})}),e.jsxs(Z,{onOpenChange:n=>u(n),className:"w-[50%] flex items-end",children:[e.jsx(G,{children:e.jsx(_,{className:"w-[50px] h-[35px] mt-[15px] mr-[30px] justify-center align-center hover:bg-accent",variant:"ghost",children:e.jsx(Aa,{className:"h-4 w-4"})})}),e.jsxs(K,{className:"w-[80%] max-w-[500px]",children:[e.jsx(X,{children:e.jsx(q,{children:"Add New Category"})}),d?e.jsxs(e.Fragment,{children:[e.jsxs(re,{name:"type",defaultValue:d.categoryType,className:"flex flex-row align-center justify-center items-center mt-[25px]",children:[e.jsxs("div",{className:"flex items-center space-x-2 mr-10",children:[e.jsx(F,{name:"type",value:"expense",id:"expense",onClick:()=>p(n=>({...n,categoryType:"expense"}))}),e.jsx(S,{htmlFor:"expense",children:"Expense"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"income",id:"income",onClick:()=>p(n=>({...n,categoryType:"income"}))}),e.jsx(S,{htmlFor:"income",children:"Income"})]})]}),e.jsxs("div",{className:"flex flex-row justify-center items-center my-[25px]",children:[e.jsxs(oe,{className:"colorDiv",children:[e.jsx(ce,{children:e.jsx("div",{className:"w-8 h-7 rounded-md mr-2 colorDiv",style:{backgroundColor:d.categoryColor}})}),e.jsxs(ee,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex justify-between items-center",children:["Current Color",e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:d.categoryColor}})]})}),e.jsx(O,{className:"h-72 w-[200px] rounded-md border",children:e.jsx("div",{className:"grid grid-cols-4 gap-[1px]",children:Q.length>0?Q.map((n,m)=>e.jsxs(Y,{onClick:()=>p(w=>({...w,categoryColor:n.value})),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:`${n.value}`}})}),m%4===3&&e.jsx("div",{className:"w-full"})," "]},n.value)):e.jsx("div",{})})})]})]}),e.jsx(U,{className:"w-[200px]",defaultValue:d.categoryTitle,placeholder:"Category Name",onChange:n=>p(m=>({...m,categoryTitle:n.target.value}))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(V,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",onClick:()=>h(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Save"})})})})]}):e.jsx(e.Fragment,{})]})]})]}),e.jsxs(ne,{className:"flex flex-row h-[100%] w-[100%]",children:[e.jsxs("div",{className:"w-[50%] flex flex-col justify-start items-start m-0 sm:ml-[25px]",children:[e.jsxs("div",{className:"w-full flex flex-row align-center justify-center items-center mb-4",children:[e.jsx("div",{className:"w-[40%] h-[0px]",style:{borderBottom:"0.5px solid #9494944d"}}),e.jsx("div",{children:e.jsx("p",{className:"mr-2 ml-2 text-sm text-muted-foreground",children:"Expense"})}),e.jsx("div",{className:"w-[40%] h-[0px]",style:{borderBottom:"0.5px solid #9494944d"}})]}),e.jsx(O,{className:"h-[210px] w-full",children:e.jsxs(Z,{onOpenChange:n=>u(n),children:[e.jsx("div",{className:"flex flex-col",children:s.categories.length>0?s.categories.map((n,m)=>{if(n.categoryType==="expense")return e.jsx(G,{className:" rounded-md hover:bg-accent mr-2",children:e.jsxs("div",{className:"flex flex-row align-center items-center py-2 pl-2",onClick:()=>{v(n)},children:[e.jsx("div",{className:"w-5 h-5 rounded-md mr-2 colorDiv",style:{backgroundColor:`${n.categoryColor}`}}),n.categoryTitle]})},m)}):e.jsx("div",{})}),e.jsxs(K,{className:"w-[80%] max-w-[500px]",children:[e.jsx(X,{children:e.jsx(q,{children:"Click Save to Apply Changes"})}),g?e.jsxs(e.Fragment,{children:[e.jsxs(re,{name:"type",defaultValue:g.categoryType,className:"flex flex-row align-center justify-center items-center mt-[25px]",children:[e.jsxs("div",{className:"flex items-center space-x-2 mr-10",children:[e.jsx(F,{name:"type",value:"expense",id:"expense",onClick:()=>v(n=>({...n,categoryType:"expense"}))}),e.jsx(S,{htmlFor:"expense",children:"Expense"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"income",id:"income",onClick:()=>v(n=>({...n,categoryType:"income"}))}),e.jsx(S,{htmlFor:"income",children:"Income"})]})]}),e.jsxs("div",{className:"flex flex-row justify-center items-center my-[25px]",children:[e.jsxs(oe,{className:"colorDiv",children:[e.jsx(ce,{children:e.jsx("div",{className:"w-8 h-7 rounded-md mr-2 colorDiv",style:{backgroundColor:g.categoryColor}})}),e.jsxs(ee,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex justify-between items-center",children:["Current Color",e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:g.categoryColor}})]})}),e.jsx(O,{className:"h-72 w-[200px] rounded-md border",children:e.jsx("div",{className:"grid grid-cols-4 gap-[1px]",children:Q.length>0?Q.map((n,m)=>e.jsxs(Y,{onClick:()=>v(w=>({...w,categoryColor:n.value})),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:`${n.value}`}})}),m%4===3&&e.jsx("div",{className:"w-full"})," "]},n.value)):e.jsx("div",{})})})]})]}),e.jsx(U,{className:"w-[200px]",defaultValue:g.categoryTitle,placeholder:"Category Name",onChange:n=>v(m=>({...m,categoryTitle:n.target.value}))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(Z,{children:[e.jsx(G,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})}),e.jsxs(K,{className:"w-[80%] max-w-[500px]",children:[e.jsxs(X,{children:[e.jsxs(q,{children:["Delete the ",g.categoryTitle," category, and it's transactions?"]}),e.jsxs(he,{children:["This action cannot be undone and it will permanently delete your"," ",g.categoryTitle," category and all related transactions. Are you sure?"]})]}),e.jsxs("div",{className:"flex flex-row justify-end",children:[e.jsx(V,{children:e.jsx(_,{className:"w-[100px] h-[37px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Cancel"})})}),e.jsx(V,{children:e.jsx(_,{className:"ml-[10px] w-[100px] h-[37px] flex justify-center items-center",variant:"destructive",onClick:()=>L(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})})]})]})]}),e.jsx(V,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",onClick:()=>j(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Save"})})})]})]}):e.jsx(e.Fragment,{})]})]})})]}),e.jsxs("div",{className:"w-[50%] flex flex-col justify-start items-start m-0 sm:ml-[30px]",children:[e.jsxs("div",{className:"w-full flex flex-row align-center justify-center items-center mb-4",children:[e.jsx("div",{className:"w-[40%] h-[0px]",style:{borderBottom:"0.5px solid #9494944d"}}),e.jsx("div",{children:e.jsx("p",{className:"mr-2 ml-2 text-sm text-muted-foreground",children:"Income"})}),e.jsx("div",{className:"w-[40%] h-[0px]",style:{borderBottom:"0.5px solid #9494944d"}})]}),e.jsx(O,{className:"h-[210px] w-full",children:e.jsxs(Z,{onOpenChange:n=>u(n),children:[e.jsx("div",{className:"flex flex-col",children:s.categories.length>0?s.categories.map((n,m)=>{if(n.categoryType==="income")return e.jsx(G,{className:"rounded-md hover:bg-accent sm:mr-2",children:e.jsxs("div",{className:"flex flex-row align-center items-center py-2 pl-2",onClick:()=>{v(n)},children:[e.jsx("div",{className:"w-5 h-5 rounded-md mr-2 colorDiv",style:{backgroundColor:`${n.categoryColor}`}}),n.categoryTitle]})},m)}):e.jsx("div",{})}),e.jsxs(K,{className:"w-[80%] max-w-[500px]",children:[e.jsx(X,{children:e.jsx(q,{children:"Click Save to Apply Changes"})}),g?e.jsxs(e.Fragment,{children:[e.jsxs(re,{name:"type",defaultValue:g.categoryType,className:"flex flex-row align-center justify-center items-center mt-[25px]",children:[e.jsxs("div",{className:"flex items-center space-x-2 mr-10",children:[e.jsx(F,{name:"type",value:"expense",id:"expense",onClick:()=>v(n=>({...n,categoryType:"expense"}))}),e.jsx(S,{htmlFor:"expense",children:"Expense"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"income",id:"income",onClick:()=>v(n=>({...n,categoryType:"income"}))}),e.jsx(S,{htmlFor:"income",children:"Income"})]})]}),e.jsxs("div",{className:"flex flex-row justify-center items-center my-[25px]",children:[e.jsxs(oe,{className:"colorDiv",children:[e.jsx(ce,{children:e.jsx("div",{className:"w-8 h-7 rounded-md mr-2 colorDiv",style:{backgroundColor:g.categoryColor}})}),e.jsxs(ee,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex justify-between items-center",children:["Current Color",e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:g.categoryColor}})]})}),e.jsx(O,{className:"h-72 w-[200px] rounded-md border",children:e.jsx("div",{className:"grid grid-cols-4 gap-[1px]",children:Q.length>0?Q.map((n,m)=>e.jsxs(Y,{onClick:()=>v(w=>({...w,categoryColor:n.value})),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:`${n.value}`}})}),m%4===3&&e.jsx("div",{className:"w-full"})," "]},n.value)):e.jsx("div",{})})})]})]}),e.jsx(U,{className:"w-[200px]",defaultValue:g.categoryTitle,placeholder:"Category Name",onChange:n=>v(m=>({...m,categoryTitle:n.target.value}))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(Z,{children:[e.jsx(G,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})}),e.jsxs(K,{className:"w-[80%] max-w-[500px]",children:[e.jsxs(X,{children:[e.jsxs(q,{children:["Delete the ",g.categoryTitle," category?"]}),e.jsxs(he,{children:["This action cannot be undone and it will permanently delete your"," ",g.categoryTitle," category. Are you sure?"]})]}),e.jsxs("div",{className:"flex flex-row justify-end",children:[e.jsx(V,{children:e.jsx(_,{className:"w-[100px] h-[37px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Cancel"})})}),e.jsx(V,{children:e.jsx(_,{className:"ml-[10px] w-[100px] h-[37px] flex justify-center items-center",variant:"destructive",onClick:()=>L(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})})]})]})]}),e.jsx(V,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",onClick:()=>j(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Save"})})})]})]}):e.jsx(e.Fragment,{})]})]})})]})]})]})}const It="https://api.madanilab.site",aa={clientId:"06b0630f66b18f473a617819261e2e6a.access",clientSecret:"2554796ee90aee81b35787f4d427b86bd1d0cece38c6d9d8bee9336b88b52eb6"},We=l.createContext();function Dt(){const[a,t]=l.useState(null),[s,r]=l.useState(!0);l.useState({height:window.innerHeight,width:window.innerWidth});const{token:o,userData:u,update:d,userId:p}=l.useContext(W),g=Intl.DateTimeFormat().resolvedOptions().timeZone,v=o?{headers:{Authorization:o,"Content-Type":"application/json","X-User-Timezone":g,"CF-Access-Client-Id":aa.clientId,"CF-Access-Client-Secret":aa.clientSecret}}:null;async function A(){try{const D=await P.get(It+"/api/balance/timeframe-total-balance/"+p,v);t(D.data.balance)}catch(D){console.log(D)}}return l.useEffect(()=>{r(!0),u&&(A(),r(!1))},[u,d]),s?e.jsx("div",{children:"Loading..."}):e.jsx(We.Provider,{value:{balanceData:a},children:e.jsxs("div",{className:"main",children:[e.jsx("div",{className:"add-transaction",children:e.jsx(rt,{})}),e.jsxs("div",{className:"top-section",children:[e.jsx("div",{className:"total-balance",children:e.jsx(it,{})}),e.jsx("div",{className:"income-expense-balance",children:e.jsx(dt,{})}),e.jsx("div",{className:"account-analytic",children:e.jsx(pt,{})}),e.jsx("div",{className:"last-days",children:e.jsx(gt,{})}),e.jsx("div",{className:"category-legend",children:e.jsx($t,{})})]}),e.jsxs("div",{className:"bottom-section",children:[e.jsx("div",{className:"category-analytic",children:e.jsx(Nt,{})}),e.jsx("div",{className:"sankey",children:e.jsx(Ct,{})}),e.jsx("div",{className:"history",children:e.jsx(bt,{})})]})]})})}const kt=De("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Je=Ea.forwardRef(({className:a,variant:t,size:s,asChild:r=!1,loading:o,children:u,...d},p)=>{const g=r?Me:"button";return e.jsx(g,{className:x(kt({variant:t,size:s,className:a})),disabled:o,ref:p,...d,children:e.jsxs(e.Fragment,{children:[o&&e.jsx(Ys,{className:x("h-4 w-4 animate-spin",u&&"mr-2")}),u]})})});Je.displayName="LoadingButton";const ss=Gs,ts=l.createContext({}),Ie=({...a})=>e.jsx(ts.Provider,{value:{name:a.name},children:e.jsx(Ws,{...a})}),Te=()=>{const a=l.useContext(ts),t=l.useContext(ns),{getFieldState:s,formState:r}=Zs(),o=s(a.name,r);if(!a)throw new Error("useFormField should be used within <FormField>");const{id:u}=t;return{id:u,name:a.name,formItemId:`${u}-form-item`,formDescriptionId:`${u}-form-item-description`,formMessageId:`${u}-form-item-message`,...o}},ns=l.createContext({}),je=l.forwardRef(({className:a,...t},s)=>{const r=l.useId();return e.jsx(ns.Provider,{value:{id:r},children:e.jsx("div",{ref:s,className:x("space-y-2",a),...t})})});je.displayName="FormItem";const ye=l.forwardRef(({className:a,...t},s)=>{const{error:r,formItemId:o}=Te();return e.jsx(S,{ref:s,className:x(r&&"text-destructive",a),htmlFor:o,...t})});ye.displayName="FormLabel";const be=l.forwardRef(({...a},t)=>{const{error:s,formItemId:r,formDescriptionId:o,formMessageId:u}=Te();return e.jsx(Me,{ref:t,id:r,"aria-describedby":s?`${o} ${u}`:`${o}`,"aria-invalid":!!s,...a})});be.displayName="FormControl";const St=l.forwardRef(({className:a,...t},s)=>{const{formDescriptionId:r}=Te();return e.jsx("p",{ref:s,id:r,className:x("text-[0.8rem] text-muted-foreground",a),...t})});St.displayName="FormDescription";const ve=l.forwardRef(({className:a,children:t,...s},r)=>{const{error:o,formMessageId:u}=Te(),d=o?String(o==null?void 0:o.message):t;return d?e.jsx("p",{ref:r,id:u,className:x("text-[0.8rem] font-medium text-destructive",a),...s,children:d}):null});ve.displayName="FormMessage";const Tt="https://api.madanilab.site",sa={clientId:"06b0630f66b18f473a617819261e2e6a.access",clientSecret:"2554796ee90aee81b35787f4d427b86bd1d0cece38c6d9d8bee9336b88b52eb6"},At=me.object({username:me.string().min(3,{message:"Username must be at least 3 characters."}),password:me.string().min(5,{message:"Password must be at least 5 characters."})}),Ft=()=>{const[a,t]=l.useState(!1),s=Oa({resolver:Ba(At),defaultValues:{username:"",password:""}}),r=(d,p,g)=>{localStorage.setItem("FinanceMadaniLabBearerToken",d),localStorage.setItem("FinanceMadaniLabUserId",p),localStorage.setItem("FinanceMadaniLabUsername",g)};async function o(d){t(!0),setTimeout(()=>{t(!1)},5e3),await P.post(Tt+"/auth/login",d,{headers:{"Content-Type":"application/json","CF-Access-Client-Id":sa.clientId,"CF-Access-Client-Secret":sa.clientSecret}}).then(p=>{let g=p.data.token;g=g.split(" ")[1],r(g,p.data.userId,p.data.username),Ne("/home"),window.location.reload()}).catch(p=>{console.error("Error logging in:",p)})}function u(){window.location.href="/signup"}return e.jsxs("div",{className:"main-auth",children:[e.jsxs("div",{className:"form",children:[e.jsx("h2",{className:"pb-2 text-3xl font-semibold tracking-tight",children:"Log In"}),e.jsx(ss,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(o),className:"space-y-8",children:[e.jsx(Ie,{control:s.control,name:"username",render:({field:d})=>{var p;return e.jsxs(je,{children:[e.jsx(ye,{children:"Username"}),e.jsx(be,{children:e.jsx(U,{placeholder:"Username",maxLength:20,...d,onChange:g=>{const v=g.target.value.replace(/[^a-zA-Z0-9]/g,"");d.onChange(v)}})}),e.jsx(ve,{children:(p=s.formState.errors.username)==null?void 0:p.message})]})}}),e.jsx(Ie,{control:s.control,name:"password",render:({field:d})=>{var p;return e.jsxs(je,{children:[e.jsx(ye,{children:"Password"}),e.jsx(be,{children:e.jsx(U,{type:"password",placeholder:"Password",maxLength:30,...d})}),e.jsx(ve,{children:(p=s.formState.errors.password)==null?void 0:p.message})]})}}),e.jsx(Je,{type:"submit",loading:a,onSubmit:o,children:"Submit"})]})})]}),e.jsxs("div",{className:"bottomBtn",children:[e.jsx("p",{children:"Don't have an account? "}),e.jsx(E,{variant:"link",onClick:u,children:"Sign Up"})]})]})},Pt="https://api.madanilab.site",ta={clientId:"06b0630f66b18f473a617819261e2e6a.access",clientSecret:"2554796ee90aee81b35787f4d427b86bd1d0cece38c6d9d8bee9336b88b52eb6"},Lt=me.object({username:me.string().min(3,{message:"Username must be at least 3 characters."}).regex(/^[a-zA-Z0-9]+$/,{message:"Username can only contain letters and numbers."}),password:me.string().min(5,{message:"Password must be at least 5 characters."})}),_t=()=>{const[a,t]=l.useState(!1),s=Oa({resolver:Ba(Lt),defaultValues:{username:"",password:""}});async function r(u){t(!0),setTimeout(()=>{t(!1)},5e3);try{const d=await P.post(Pt+"/auth/signup",u,{headers:{"Content-Type":"application/json","CF-Access-Client-Id":ta.clientId,"CF-Access-Client-Secret":ta.clientSecret}});window.location.href="/login"}catch(d){console.log(d)}}function o(){window.location.href="/login"}return e.jsxs("div",{className:"main-auth",children:[e.jsxs("div",{className:"form",children:[e.jsx("h2",{className:"scroll-m-20 pb-2 text-3xl font-semibold tracking-tight first:mt-0",children:"Sign Up"}),e.jsx(ss,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(r),className:"space-y-8",children:[e.jsx(Ie,{control:s.control,name:"username",render:({field:u})=>{var d;return e.jsxs(je,{children:[e.jsx(ye,{children:"Username"}),e.jsx(be,{children:e.jsx(U,{placeholder:"Username",maxLength:20,...u,onChange:p=>{const g=p.target.value.replace(/[^a-zA-Z0-9]/g,"");u.onChange(g)}})}),e.jsx(ve,{children:(d=s.formState.errors.username)==null?void 0:d.message})]})}}),e.jsx(Ie,{control:s.control,name:"password",render:({field:u})=>{var d;return e.jsxs(je,{children:[e.jsx(ye,{children:"Password"}),e.jsx(be,{children:e.jsx(U,{type:"password",placeholder:"Password",maxLength:30,...u})}),e.jsx(ve,{children:(d=s.formState.errors.password)==null?void 0:d.message})]})}}),e.jsx(Je,{type:"submit",loading:a,onSubmit:r,children:"Submit"})]})})]}),e.jsxs("div",{className:"bottomBtn",children:[e.jsx("p",{children:"Already have an account? "}),e.jsx(E,{variant:"link",onClick:o,children:"Log In"})]})]})},ls=l.createContext();function Rt({children:a,defaultTheme:t="system",storageKey:s="vite-ui-theme",...r}){const[o,u]=l.useState(()=>localStorage.getItem(s)||t);l.useEffect(()=>{const p=window.document.documentElement;if(p.classList.remove("light","dark"),o==="system"){const g=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";p.classList.add(g);return}p.classList.add(o)},[o]);const d={theme:o,setTheme:p=>{localStorage.setItem(s,p),u(p)}};return e.jsx(ls.Provider,{...r,value:d,children:a})}const rs=()=>{const a=l.useContext(ls);if(a===void 0)throw new Error("useTheme must be used within a ThemeProvider");return a};function zt(){const{setTheme:a}=rs();return e.jsxs(oe,{children:[e.jsx(ce,{asChild:!0,children:e.jsxs(E,{variant:"outline",size:"icon",children:[e.jsx(Ua,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(Va,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(ee,{align:"end",children:[e.jsx(Y,{onClick:()=>a("light"),children:"Light"}),e.jsx(Y,{onClick:()=>a("dark"),children:"Dark"}),e.jsx(Y,{onClick:()=>a("system"),children:"System"})]})]})}const na="https://api.madanilab.site",Mt=[{code:"USD",symbol:"$",name:"United States Dollar"},{code:"EUR",symbol:"€",name:"Euro"},{code:"JPY",symbol:"¥",name:"Japanese Yen"},{code:"GBP",symbol:"£",name:"British Pound"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"CHF",symbol:"Fr",name:"Swiss Franc"},{code:"CNY",symbol:"¥",name:"Chinese Yuan"},{code:"INR",symbol:"₹",name:"Indian Rupee"},{code:"RUB",symbol:"₽",name:"Russian Ruble"},{code:"ZAR",symbol:"R",name:"South African Rand"},{code:"BRL",symbol:"R$",name:"Brazilian Real"},{code:"MXN",symbol:"$",name:"Mexican Peso"}];function Et(){const{setDialogIsOpen:a,token:t,userId:s,config:r,setUserData:o,currency:u,setCurrency:d}=l.useContext(W),{setTheme:p}=rs(),[g,v]=l.useState(null),[A,D]=l.useState({username:"",password:""}),[h,j]=l.useState(!1),L=()=>(localStorage.removeItem("FinanceMadaniLabBearerToken"),localStorage.removeItem("FinanceMadaniLabUserId"),localStorage.removeItem("FinanceMadaniLabUsername"),window.location.reload(),Ne("/login"));function n(){const $=localStorage.getItem("FinanceMadaniLabUsername");v($)}l.useEffect(()=>{n()},[g]);function m(){P.delete(`${na}/auth/delete-account`,r).then(()=>{L()}).catch($=>{console.error("Error deleting account:",$)})}async function w($){try{if(t&&s){d($);const k=await P.put(`${na}/api/profile/update-currency/${s}`,{updatedCurrency:$},r);o(k.data.data),d(k.data.data.currency)}d($)}catch(k){console.error("Error updating currency:",k)}}return e.jsxs(Z,{onOpenChange:$=>a($),children:[e.jsx(G,{asChild:!0,children:e.jsx(E,{variant:"outline",size:"icon",children:e.jsx(Js,{variant:"outline"})})}),e.jsxs(K,{className:"w-[80%] max-w-[500px]",children:[e.jsx(X,{children:e.jsxs(q,{children:["Hi ",g," 👋"]})}),e.jsxs("div",{className:"sm:p-[20px]",children:[e.jsxs("div",{className:"flex flex-row justify-between items-center mt-[15px]",children:[e.jsx(S,{children:"Set Theme"}),e.jsxs(oe,{children:[e.jsx(ce,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:"w-[150px]",children:[e.jsx(Ua,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(Va,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(ee,{className:"w-[150px]",align:"start",children:[e.jsx(Y,{onClick:()=>p("light"),children:"Light"}),e.jsx(Y,{onClick:()=>p("dark"),children:"Dark"}),e.jsx(Y,{onClick:()=>p("system"),children:"System"})]})]})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center mt-[10px]",children:[e.jsx(S,{children:"Currency"}),e.jsxs(oe,{children:[e.jsx(ce,{asChild:!0,children:e.jsx(E,{className:"w-[150px]",variant:"outline",children:u})}),e.jsx(ee,{className:"w-[150px]",align:"start",children:e.jsx(O,{className:"h-[250px]",children:Mt.map($=>e.jsxs(Y,{onClick:()=>w($.code),children:[$.code," - ",$.symbol]},$.code))})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-[50px]",children:[e.jsxs(Ke,{modal:!0,open:h,onOpenChange:j,children:[e.jsx(Ye,{asChild:!0,children:e.jsx(E,{variant:"ghost",children:"Delete Account"})}),e.jsxs(Se,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."}),e.jsxs("form",{onSubmit:$=>{$.preventDefault(),m()},children:[e.jsx(U,{className:"m-[5px]",type:"text",placeholder:"Username",value:A.username,onChange:$=>D(k=>({...k,username:$.target.value})),"aria-label":"Username",disabled:!0}),e.jsx(U,{className:"m-[5px]",type:"password",placeholder:"Password",value:A.password,onChange:$=>D(k=>({...k,password:$.target.value})),"aria-label":"Password",disabled:!0}),e.jsx(E,{className:"mt-[5px] ml-[5px]",variant:"destructive",type:"submit",disabled:!0,children:"Delete Account"})]})]})]}),e.jsx(E,{variant:"ghost",onClick:L,children:"Sign Out"})]})]})]})}function Ot(){const[a,t]=l.useState(null),[s,r]=l.useState(!1),o="https://api.madanilab.site",u={clientId:"06b0630f66b18f473a617819261e2e6a.access",clientSecret:"2554796ee90aee81b35787f4d427b86bd1d0cece38c6d9d8bee9336b88b52eb6"};return l.useEffect(()=>{(async()=>{const p=localStorage.getItem("FinanceMadaniLabBearerToken"),g=localStorage.getItem("FinanceMadaniLabUserId");if(p){t("Bearer "+p);try{(await P.get(o+"/auth/authenticated/"+g,{headers:{authorization:"Bearer "+p,"Content-Type":"application/json","CF-Access-Client-Id":u.clientId,"CF-Access-Client-Secret":u.clientSecret}})).status===200?r(!0):r(!1)}catch(v){r(!1),console.log(v)}return Ne("/home")}else return r(!1),console.log("Missing token"),Ne("/login")})()},[a]),e.jsx(e.Fragment,{children:e.jsx(et,{children:e.jsxs(Rt,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:[e.jsxs("div",{className:"header",children:[e.jsx("h2",{className:"scroll-m-20 pb-2 lg:text-2xl font-semibold tracking-tight",children:e.jsx("a",{href:"https://finance.madanilab.site",children:"MadaniLab Finance"})}),s?e.jsx(Et,{}):e.jsx(zt,{})]}),e.jsxs(Xs,{children:[e.jsx(we,{path:"/",element:s?e.jsx(pe,{to:"/home"}):e.jsx(pe,{to:"/login"})}),e.jsx(we,{path:"/home",element:s?e.jsx(Dt,{}):e.jsx(pe,{to:"/login"})}),e.jsx(we,{path:"/login",element:s?e.jsx(pe,{to:"/home"}):e.jsx(Ft,{})}),e.jsx(we,{path:"/signup",element:s?e.jsx(pe,{to:"/home"}):e.jsx(_t,{})})]})]})})})}qs.createRoot(document.getElementById("root")).render(e.jsx(Ea.StrictMode,{children:e.jsx(Qs,{children:e.jsx(Ot,{})})}));
