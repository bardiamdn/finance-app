import{r,j as e,a as P,t as is,c as ds,b as Ie,d as ms,J as us,$ as la,e as ra,f as oa,C as xs,g as ca,h as ia,i as fs,k as hs,l as ps,m as da,n as ma,o as ua,p as gs,q as ze,s as xa,u as js,v as ys,w as fa,x as bs,y as ha,z as pa,A as ga,B as vs,D as Me,E as ws,F as ja,G as Ue,P as Ns,H as ya,R as Cs,T as $s,I as Is,K as ba,L as va,M as Xe,N as de,O as Ee,Q as he,S as wa,U as Na,V as Ds,W as Ca,X as $a,Y as Ia,Z as Da,_ as ka,a0 as ks,a1 as Sa,a2 as Ta,a3 as Ss,a4 as Ts,a5 as Aa,a6 as Ae,a7 as Fe,a8 as Pe,a9 as Le,aa as _e,ab as Re,ac as As,ad as Fs,ae as Ps,af as Ls,ag as Fa,ah as _s,ai as Rs,aj as Pa,ak as zs,al as La,am as Ms,an as Us,ao as _a,ap as Es,aq as Ra,ar as za,as as Os,at as Bs,au as Ma,av as Vs,aw as Hs,ax as Ks,ay as Ua,az as Ys,aA as Zs,aB as Gs,aC as Ws,aD as ue,aE as Oe,aF as Ea,aG as Oa,aH as Ba,aI as Va,aJ as Js,aK as Xs,aL as me,aM as we,aN as qs,aO as Qs}from"./vendor-DliyEocu.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function t(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=t(c);fetch(c.href,u)}})();const V=r.createContext();function et({children:a,...s}){const[t,l]=r.useState(!1),[c,u]=r.useState(null),[p,y]=r.useState(!1),[b,w]=r.useState(!0),[k,$]=r.useState(null),[d,f]=r.useState(null),[T,n]=r.useState(!1),[m,N]=r.useState({code:"USD",symbol:"$",name:"United States Dollar"}),[L,A]=r.useState({height:window.innerHeight,width:window.innerWidth}),D="https://api.madanilab.site",M={clientId:"06b0630f66b18f473a617819261e2e6a.access",clientSecret:"2554796ee90aee81b35787f4d427b86bd1d0cece38c6d9d8bee9336b88b52eb6"};function x(){const j=localStorage.getItem("FinanceMadaniLabBearerToken");u(`Bearer ${j}`),$(localStorage.getItem("FinanceMadaniLabUserId"))}const o=Intl.DateTimeFormat().resolvedOptions().timeZone,h=c?{headers:{Authorization:c,"Content-Type":"application/json","X-User-Timezone":o,"CF-Access-Client-Id":M.clientId,"CF-Access-Client-Secret":M.clientSecret}}:null;return r.useLayoutEffect(()=>{(async()=>{const v=localStorage.getItem("FinanceMadaniLabBearerToken"),i=localStorage.getItem("FinanceMadaniLabUserId");if(v&&i){u("Bearer "+v),$(i);try{(await P.get(D+"/auth/authenticated/"+i,{headers:{authorization:"Bearer "+v,"Content-Type":"application/json","CF-Access-Client-Id":M.clientId,"CF-Access-Client-Secret":M.clientSecret}})).status===200?y(!0):y(!1),w(!1)}catch(C){y(!1),console.log(C)}}else y(!1),console.log("Missing token")})()},[t]),r.useEffect(()=>{async function j(v){try{if(c&&v){const i=await P.get(D+`/api/profile/read-profile/${v}`,h);f(i.data.data),N(i.data.data.currency)}}catch(i){console.error("Error fetching data:",i)}}j(k)},[k]),r.useEffect(()=>{x();const j=()=>{A({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",j),()=>{window.removeEventListener("resize",j)}},[]),e.jsx(V.Provider,{...s,value:{token:c,setToken:u,userId:k,setUserId:$,userData:d,apiUrl:D,config:h,isAuthenticated:p,setIsAuthenticated:y,mainLoading:b,update:t,setUpdate:l,setUserData:f,dialogIsOpen:T,setDialogIsOpen:n,setCurrency:N,currency:m,dims:L},children:a})}function g(...a){return is(ds(a))}const at=Ie("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _({className:a,variant:s,...t}){return e.jsx("div",{className:g(at({variant:s}),a),...t})}const st=({...a})=>{const{theme:s="system"}=ms();return e.jsx(us,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...a})};function K({className:a,...s}){return e.jsx("div",{className:g("animate-pulse rounded-md bg-primary/10",a),...s})}const G=hs,W=ps,tt=fs,H=oa,Ha=r.forwardRef(({className:a,...s},t)=>e.jsx(la,{ref:t,className:g("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s}));Ha.displayName=la.displayName;const Y=r.forwardRef(({className:a,children:s,...t},l)=>e.jsxs(tt,{children:[e.jsx(Ha,{}),e.jsxs(ra,{ref:l,className:g("fixed left-[50%] top-[50%] z-50 grid w-full max-w-xl translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t,children:[s,e.jsxs(oa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(xs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Y.displayName=ra.displayName;const X=({className:a,...s})=>e.jsx("div",{className:g("flex flex-col space-y-1.5 text-center sm:text-left",a),...s});X.displayName="DialogHeader";const Ka=({className:a,...s})=>e.jsx("div",{className:g("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s});Ka.displayName="DialogFooter";const q=r.forwardRef(({className:a,...s},t)=>e.jsx(ca,{ref:t,className:g("text-lg font-semibold leading-none tracking-tight",a),...s}));q.displayName=ca.displayName;const pe=r.forwardRef(({className:a,...s},t)=>e.jsx(ia,{ref:t,className:g("text-sm text-muted-foreground",a),...s}));pe.displayName=ia.displayName;const Ya=gs,Be=r.forwardRef(({className:a,...s},t)=>e.jsx(da,{ref:t,className:g("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...s}));Be.displayName=da.displayName;const Ve=r.forwardRef(({className:a,...s},t)=>e.jsx(ma,{ref:t,className:g("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...s}));Ve.displayName=ma.displayName;const nt=r.forwardRef(({className:a,...s},t)=>e.jsx(ua,{ref:t,className:g("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s}));nt.displayName=ua.displayName;const B=r.forwardRef(({className:a,type:s,...t},l)=>e.jsx("input",{type:s,className:g("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:l,...t}));B.displayName="Input";const Ne=Ie("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),U=r.forwardRef(({className:a,variant:s,size:t,asChild:l=!1,...c},u)=>{const p=l?ze:"button";return e.jsx(p,{className:g(Ne({variant:s,size:t,className:a})),ref:u,...c})});U.displayName="Button";const E=r.forwardRef(({className:a,children:s,...t},l)=>e.jsxs(xa,{ref:l,className:g("relative overflow-hidden",a),...t,children:[e.jsx(js,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(De,{}),e.jsx(ys,{})]}));E.displayName=xa.displayName;const De=r.forwardRef(({className:a,orientation:s="vertical",...t},l)=>e.jsx(fa,{ref:l,orientation:s,className:g("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...t,children:e.jsx(bs,{className:"relative flex-1 rounded-full bg-border"})}));De.displayName=fa.displayName;const lt=Ie("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),S=r.forwardRef(({className:a,...s},t)=>e.jsx(ha,{ref:t,className:g(lt(),a),...s}));S.displayName=ha.displayName;const re=r.forwardRef(({className:a,...s},t)=>e.jsx(pa,{className:g("grid gap-2",a),...s,ref:t}));re.displayName=pa.displayName;const F=r.forwardRef(({className:a,...s},t)=>e.jsx(ga,{ref:t,className:g("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:e.jsx(vs,{className:"flex items-center justify-center",children:e.jsx(Me,{className:"h-3.5 w-3.5 fill-primary"})})}));F.displayName=ga.displayName;function ge({className:a,classNames:s,showOutsideDays:t=!0,...l}){return e.jsx(ws,{showOutsideDays:t,className:g("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:g(Ne({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:g("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",l.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:g(Ne({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...c})=>e.jsx(ja,{className:"h-4 w-4"}),IconRight:({...c})=>e.jsx(Ue,{className:"h-4 w-4"})},...l})}ge.displayName="Calendar";const He=r.forwardRef(({className:a,...s},t)=>e.jsx("textarea",{className:g("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s}));He.displayName="Textarea";const Ke=Cs,Ye=$s,ke=r.forwardRef(({className:a,align:s="center",sideOffset:t=4,...l},c)=>e.jsx(Ns,{children:e.jsx(ya,{ref:c,align:s,sideOffset:t,className:g("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})}));ke.displayName=ya.displayName;function rt(){const{apiUrl:a,setUpdate:s,config:t,userData:l,token:c,userId:u,dialogIsOpen:p,setDialogIsOpen:y}=r.useContext(V),[b,w]=r.useState(!1),[k,$]=r.useState(!0),[d,f]=r.useState({userId:u,_id:"",accountId:"",toAccountId:"",fromAccountId:"",type:"expense",categoryId:"",amount:0,date:new Date,description:""});r.useEffect(()=>{$(!0),l&&l.accounts.length>0&&l.categories.length>0&&(f({userId:u,accountId:l.accounts.length>0?l.accounts[0]._id:"",toAccountId:"",fromAccountId:"",type:"expense",categoryId:l.categories.length>0?l.categories[0]._id:"",amount:0,date:new Date,description:""}),$(!1))},[l]);async function T(){try{if(u&&c&&(d.categoryId!==""||d.toAccountId!=="")&&d.accountId!==""&&d.amount!==0){const n=await P.post(a+"/api/transaction/create",d,t);f({userId:u,accountId:l.accounts.length>0?l.accounts[0]._id:"",toAccountId:"",fromAccountId:"",type:"expense",categoryId:l.categories.length>0?l.categories[0]._id:"",amount:0,date:new Date,description:""}),s(m=>!m),Xe("Event has been created",{description:`Your ${n.data.data.type} was ${n.data.data.amount}$ on ${n.data.data.date.split("T")[0]}`,action:{label:"Undo",onClick:()=>console.log("Undo")}})}else Xe("Error creating the transaction",{}),console.log("Missing Data")}catch(n){console.error("Error adding category:",n)}}return k?e.jsx(K,{className:"w-[180px] h-[40px]"}):e.jsxs(G,{onOpenChange:n=>y(n),className:"h-[90%] max-w-[320px] md:max-w-lg lg:max-w-2xl",children:[!p&&e.jsx(W,{as:"button",className:"w-[50px] md:w-[200px] h-[50px]",children:e.jsxs(_,{className:"w-full h-full flex justify-center items-center rounded-xl p-2",children:[e.jsx(Is,{className:"md:mr-1 h-6 w-6"}),e.jsx("p",{className:"text-lg font-semibold m-0 hidden md:block",children:"Add Transaction"})]})}),e.jsxs(Y,{className:"h-[90%] max-w-[320px] md:max-w-lg lg:max-w-2xl min-h-[610px]",children:[l.accounts.length>0?e.jsx(Ya,{defaultValue:d.accountId,className:"h-[80%] w-full max-w-[275px] md:max-w-lg lg:max-w-2xl",children:e.jsxs(E,{className:"h-[50px] w-full p-1",children:[e.jsx(Be,{className:"flex justify-center items-center",children:e.jsx("div",{className:"flex flex-row justify-between",children:l.accounts.map((n,m)=>e.jsx(Ve,{name:"account",value:n._id,className:"ml-1 mr-1",style:{color:n.accountColor},onClick:()=>{f(N=>({...N,accountId:n._id}))},children:n.accountTitle},m))})}),e.jsx(De,{orientation:"horizontal"})]})}):e.jsx("div",{children:"You don't have any account, you must have at least one"}),e.jsxs("div",{className:"h-full w-full md:m-2 flex flex-col items-center justify-between",children:[e.jsx("div",{className:"mb-2 md:m-2 flex justify-center items-center",children:e.jsx(B,{style:{fontSize:"30px",textAlign:"center"},className:"flex justify-center align-center w-[250px] md:w-8/12 h-[70px]",type:"number",min:"0",placeholder:"Transaction Amount",name:"amount",value:d.amount,onChange:n=>{f(m=>({...m,amount:n.target.value}))}})}),e.jsx("div",{className:"block md:hidden",children:e.jsxs(Ke,{open:b,onOpenChange:w,modal:!0,children:[e.jsx(Ye,{className:"w-full",asChild:!0,children:e.jsxs(U,{variant:"outline",className:g("w-full justify-start text-left font-normal",!d.date&&"text-muted-foreground"),children:[e.jsx(ba,{className:"mr-2 h-4 w-4"}),d.date?va(d.date,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(ke,{className:"w-auto p-0",align:"start",children:e.jsx(ge,{mode:"single",selected:d.date,name:"date",disabled:n=>n>new Date||n<new Date("1900-01-01"),onSelect:n=>{n.setHours(12),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),f(m=>({...m,date:n}))},className:"rounded-md border h-full w-full"})})]})}),e.jsxs("div",{className:"flex flex-row justify-center sm:justify-between items-start md:mt-10 mt-2",children:[e.jsxs("div",{className:"flex flex-col justify-start items-start",children:[e.jsx("div",{className:"flex items-center m-2 ml-1",children:e.jsxs(re,{name:"type",defaultValue:d.type,className:"flex flex-row lg:flex-row md:flex-col lg:items-center items-start",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"expense",id:"expense",onClick:()=>{f(n=>({...n,type:"expense"}))}}),e.jsx(S,{htmlFor:"expense",children:"Expense"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"income",id:"income",onClick:()=>{f(n=>({...n,type:"income"}))}}),e.jsx(S,{htmlFor:"income",children:"Income"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"transfer",id:"transfer",onClick:()=>{f(n=>({...n,type:"transfer"}))}}),e.jsx(S,{htmlFor:"transfer",children:"Transfer"})]})]})}),e.jsx(E,{className:"lg:h-[298px] lg:w-[231.36px] md:w-[150px] md:h-[240px] h-[180px] w-full rounded-md border px-2 pt-2 md:px-4 md:pt-4 mr-6",children:e.jsx(re,{name:"category",defaultValue:d.categoryId,children:l.categories.length>0?d.type==="expense"?l.categories.map((n,m)=>{if(n.categoryType==="expense")return e.jsxs("div",{className:"flex flex-row items-center justify-start",children:[e.jsx(F,{style:{backgroundColor:n.categoryColor},className:"w-5 h-5 mr-2",name:"category",value:n._id,id:m,onClick:()=>{f(N=>({...N,categoryId:n._id,toAccountId:"",fromAccountId:""}))}}),e.jsx(S,{htmlFor:m,className:"bg:text-lg",children:n.categoryTitle})]},m)}):d.type==="income"?l.categories.map((n,m)=>{if(n.categoryType==="income")return e.jsxs("div",{className:"flex flex-row items-center justify-start",children:[e.jsx(F,{style:{backgroundColor:n.categoryColor},className:"w-5 h-5 mr-2",name:"category",value:n._id,id:m,onClick:()=>{f(N=>({...N,categoryId:n._id,toAccountId:"",fromAccountId:""}))}}),e.jsx(S,{htmlFor:m,className:"bg:text-lg",children:n.categoryTitle})]},m)}):d.type==="transfer"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",children:"Transfer to Account"}),l.accounts.map((n,m)=>e.jsx("div",{className:"flex flex-row items-center justify-start",children:n._id===d.accountId?e.jsxs(e.Fragment,{children:[e.jsx(F,{style:{backgroundColor:n.accountColor},disabled:!0,className:"w-5 h-5 mr-2",name:"account",value:n._id,id:m,onClick:()=>{f(N=>({...N,toAccountId:n._id,fromAccountId:""}))}}),e.jsx(S,{htmlFor:m,className:"bg:text-lg text-gray-600",children:n.accountTitle})]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{style:{backgroundColor:n.accountColor},className:"w-5 h-5 mr-2",name:"account",value:n._id,id:m,onClick:()=>{f(N=>({...N,toAccountId:n._id,fromAccountId:""}))}}),e.jsx(S,{htmlFor:m,className:"bg:text-lg",children:n.accountTitle})]})},m))]}):e.jsx("div",{children:"Nothing to SHow Here ..."}):e.jsx("div",{children:"You don't have any categories"})})})]}),e.jsx("div",{className:"lg:m-2 hidden md:block",children:e.jsx(ge,{mode:"single",selected:d.date,name:"date",disabled:n=>n>new Date||n<new Date("1900-01-01"),onSelect:n=>{n.setHours(12),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),f(m=>({...m,date:n}))},className:"rounded-md border h-[322px] w-[250px]"})})]}),e.jsxs("div",{className:"lg:w[450px] w-full flex flex-col items-center mt-4",children:[e.jsx(S,{className:"mb-2 ml-1",children:"Description"}),e.jsx(He,{className:"w-full h-[70px]",name:"description",placeholder:"Enter more details here.",value:d.description,onChange:n=>{f(m=>({...m,description:n.target.value}))}})]}),e.jsx("div",{className:"flex justify-center align-center m-2 mt-7",children:e.jsx(U,{variant:"default",onClick:()=>{T()},children:"Submit"})})]})]}),e.jsx(st,{})]})}const ae=r.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:g("rounded-xl border bg-card text-card-foreground shadow",a),...s}));ae.displayName="Card";const se=r.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:g("flex flex-col space-y-1.5 p-6",a),...s}));se.displayName="CardHeader";const te=r.forwardRef(({className:a,...s},t)=>e.jsx("h3",{ref:t,className:g("font-semibold leading-none tracking-tight",a),...s}));te.displayName="CardTitle";const ot=r.forwardRef(({className:a,...s},t)=>e.jsx("p",{ref:t,className:g("text-sm text-muted-foreground",a),...s}));ot.displayName="CardDescription";const ne=r.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:g("p-6 pt-0",a),...s}));ne.displayName="CardContent";const ct=r.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:g("flex items-center p-6 pt-0",a),...s}));ct.displayName="CardFooter";function it(){const{update:a,userData:s,currency:t}=r.useContext(V),{balanceData:l}=r.useContext(We),[c,u]=r.useState(!0);return r.useEffect(()=>{u(!0),s&&l&&u(!1)},[s,l,a]),c?e.jsx(K,{className:"w-full h-full"}):e.jsxs(ae,{className:"w-full h-full flex flex-col align-stretch justify-stretch",children:[e.jsx(se,{className:"flex align-start justify-start",children:e.jsx(te,{className:"flex flex-row align-center justify-between",children:"Total Balance"})}),e.jsx(ne,{className:"w-full h-full flex justify-center items-center font-bold",children:l.totalBalance>0?e.jsxs("p",{className:"lg:text-5xl lg:font-semibold text-3xl",style:{color:"#25ff1dbd"},children:[l.totalBalance.toLocaleString()," ",t.symbol]}):e.jsxs("p",{className:"lg:text-5xl lg:font-semibold text-3xl",style:{color:"#ff1d1dbd"},children:[l.totalBalance.toLocaleString()," ",t.symbol]})})]})}function dt(){const{update:a,userData:s,currency:t}=r.useContext(V),{balanceData:l}=r.useContext(We),[c,u]=r.useState(!0);return r.useEffect(()=>{u(!0),s&&l&&u(!1)},[s,l,a]),c?e.jsx(K,{className:"w-[380px] h-[165px]"}):e.jsxs(ae,{className:"w-full h-full flex flex-col items-center",children:[e.jsx(se,{className:"w-full flex align-start justify-start",children:e.jsx(te,{className:"flex flex-row align-center justify-between",children:"Income, Expense Balance"})}),e.jsxs(ne,{className:"h-full w-full sm:w-[90%] flex flex-row justify-between items-center",children:[e.jsxs("div",{className:"w-[40%] flex flex-col justify-center items-center mr-10",children:[e.jsxs("p",{className:"font-semibold text-lg mb-5",style:{color:"#25ff1dbd"},children:[l.totalIncome.toLocaleString()," ",t.symbol]}),e.jsxs("p",{className:"font-semibold text-lg",style:{color:"#ff1d1dbd"},children:[l.totalExpense.toLocaleString()," ",t.symbol]})]}),e.jsx("div",{className:"w-[60%] h-[80px]",children:e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(Ee,{data:[{name:"balance",expense:l.totalExpense,income:l.totalIncome}],children:[e.jsx(he,{dataKey:"expense",fill:"#ff1d1dbd"}),e.jsx(he,{dataKey:"income",fill:"#25ff1dbd"})]})})})]})]})}const oe=Ss,ce=Ts,mt=r.forwardRef(({className:a,inset:s,children:t,...l},c)=>e.jsxs(wa,{ref:c,className:g("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",a),...l,children:[t,e.jsx(Ue,{className:"ml-auto h-4 w-4"})]}));mt.displayName=wa.displayName;const ut=r.forwardRef(({className:a,...s},t)=>e.jsx(Na,{ref:t,className:g("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s}));ut.displayName=Na.displayName;const ee=r.forwardRef(({className:a,sideOffset:s=4,...t},l)=>e.jsx(Ds,{children:e.jsx(Ca,{ref:l,sideOffset:s,className:g("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...t})}));ee.displayName=Ca.displayName;const Z=r.forwardRef(({className:a,inset:s,...t},l)=>e.jsx($a,{ref:l,className:g("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",a),...t}));Z.displayName=$a.displayName;const xt=r.forwardRef(({className:a,children:s,checked:t,...l},c)=>e.jsxs(Ia,{ref:c,className:g("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:t,...l,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Da,{children:e.jsx(Me,{className:"h-4 w-4"})})}),s]}));xt.displayName=Ia.displayName;const ft=r.forwardRef(({className:a,children:s,...t},l)=>e.jsxs(ka,{ref:l,className:g("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Da,{children:e.jsx(ks,{className:"h-4 w-4 fill-current"})})}),s]}));ft.displayName=ka.displayName;const xe=r.forwardRef(({className:a,inset:s,...t},l)=>e.jsx(Sa,{ref:l,className:g("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...t}));xe.displayName=Sa.displayName;const ht=r.forwardRef(({className:a,...s},t)=>e.jsx(Ta,{ref:t,className:g("-mx-1 my-1 h-px bg-muted",a),...s}));ht.displayName=Ta.displayName;const Ce=[{name:"gray 300",value:"#d2d6dc"},{name:"gray 400",value:"#9fa6b2"},{name:"gray 500",value:"#6b7280"},{name:"gray 600",value:"#4b5563"},{name:"gray 700",value:"#374151"},{name:"gray 800",value:"#1f2937"},{name:"gray 900",value:"#111827"},{name:"red 300",value:"#fca5a5"},{name:"red 400",value:"#f87171"},{name:"red 500",value:"#ef4444"},{name:"red 600",value:"#dc2626"},{name:"red 700",value:"#b91c1c"},{name:"red 800",value:"#991b1b"},{name:"red 900",value:"#7f1d1d"},{name:"yellow 300",value:"#fcd34d"},{name:"yellow 400",value:"#fbbf24"},{name:"yellow 500",value:"#f59e0b"},{name:"yellow 600",value:"#d97706"},{name:"yellow 700",value:"#b45309"},{name:"yellow 800",value:"#92400e"},{name:"yellow 900",value:"#78350f"},{name:"green 300",value:"#6ee7b7"},{name:"green 400",value:"#34d399"},{name:"green 500",value:"#10b981"},{name:"green 600",value:"#059669"},{name:"green 700",value:"#047857"},{name:"green 800",value:"#065f46"},{name:"green 900",value:"#064e3b"},{name:"blue 300",value:"#93c5fd"},{name:"blue 400",value:"#60a5fa"},{name:"blue 500",value:"#3b82f6"},{name:"blue 600",value:"#2563eb"},{name:"blue 700",value:"#1d4ed8"},{name:"blue 800",value:"#1e40af"},{name:"blue 900",value:"#1e3a8a"},{name:"indigo 300",value:"#a5b4fc"},{name:"indigo 400",value:"#818cf8"},{name:"indigo 500",value:"#6366f1"},{name:"indigo 600",value:"#4f46e5"},{name:"indigo 700",value:"#4338ca"},{name:"indigo 800",value:"#3730a3"},{name:"indigo 900",value:"#312e81"},{name:"purple 300",value:"#c4b5fd"},{name:"purple 400",value:"#a78bfa"},{name:"purple 500",value:"#8b5cf6"},{name:"purple 600",value:"#7c3aed"},{name:"purple 700",value:"#6d28d9"},{name:"purple 800",value:"#5b21b6"},{name:"purple 900",value:"#4c1d95"},{name:"pink 300",value:"#f9a8d4"},{name:"pink 400",value:"#f472b6"},{name:"pink 500",value:"#ec4899"},{name:"pink 600",value:"#db2777"},{name:"pink 700",value:"#be185d"},{name:"pink 800",value:"#9d174d"},{name:"pink 900",value:"#831843"}],I="b0",Q=[{name:"orange 1",value:`#ffb458${I}`},{name:"orange 2",value:`#ff9c22${I}`},{name:"orange 3",value:`#ff8c00${I}`},{name:"orange 4",value:`#cc7000${I}`},{name:"green 1",value:`#c5ff79${I}`},{name:"green 2",value:`#b1ff4c${I}`},{name:"green 3",value:`#93ff05${I}`},{name:"green 4",value:`#74cc00${I}`},{name:"red 1",value:`#ff6b6b${I}`},{name:"red 2",value:`#ff4040${I}`},{name:"red 3",value:`#ff0f0f${I}`},{name:"red 4",value:`#c40d0d${I}`},{name:"yellow 1",value:`#fff678${I}`},{name:"yellow 2",value:`#fff348${I}`},{name:"yellow 3",value:`#ffee00${I}`},{name:"yellow 4",value:`#dfd000${I}`},{name:"green 5",value:`#7bffa7${I}`},{name:"green 6",value:`#49ff86${I}`},{name:"green 7",value:`#00ff55${I}`},{name:"green 8",value:`#00a537${I}`},{name:"blue 1",value:`#8be9e9${I}`},{name:"blue 2",value:`#56ebeb${I}`},{name:"blue 3",value:`#00eeee${I}`},{name:"blue 4",value:`#00cece${I}`},{name:"blue 5",value:`#6b7aff${I}`},{name:"blue 6",value:`#3546dd${I}`},{name:"blue 7",value:`#0d22e2${I}`},{name:"blue 8",value:`#0013b9${I}`},{name:"purple 1",value:`#d66fff${I}`},{name:"purple 2",value:`#c635ff${I}`},{name:"purple 3",value:`#b700ff${I}`},{name:"purple 4",value:`#8b00c2${I}`},{name:"pink 1",value:`#ff74ae${I}`},{name:"pink 2",value:`#ff3388${I}`},{name:"pink 3",value:`#ff006a${I}`},{name:"pink 4",value:`#d10057${I}`}];function pt(){const{apiUrl:a,update:s,config:t,userData:l,setUserData:c,token:u,userId:p,dialogIsOpen:y,setDialogIsOpen:b}=r.useContext(V),[w,k]=r.useState(null),[$,d]=r.useState(!0),[f,T]=r.useState(null),[n,m]=r.useState({accountTitle:"",accountColor:Ce[0].value});r.useEffect(()=>{d(!0),(async()=>{try{const o=await P.get(a+"/api/balance/timeframe-account-balance/"+p,t);if(o.status===200&&l.accounts.length>0){const h=o.data.accountsBalance.reduce((v,i)=>(v[i.accountId]={balance:i.balance},v),{}),j=l.accounts.map(v=>{const i=h[v._id];return i?{...v,...i}:{...v,balance:0}});k(j),d(!1)}else o.status===204&&d(!0)}catch(o){console.log(o),d(!1)}})()},[l,s]);async function N(){try{u&&p&&n.accountTitle.length>0&&(await P.put(a+"/api/profile/add-account/"+p,n,t).then(x=>{c(x.data.data)}),m({accountTitle:"",accountColor:Ce[0].value}))}catch(x){console.error("Error posting data:",x)}}async function L(){try{if(u&&p&&f){const x=l.accounts.findIndex(o=>o._id===f._id);if(x!==-1)l.accounts[x]={...l.accounts[x],accountTitle:f.accountTitle,accountColor:f.accountColor};else return l;await P.put(a+"/api/profile/update-account/"+p,l,t).then(o=>{c(o.data.data)})}}catch(x){console.error("Error posting data:",x)}}async function A(x){try{u&&p&&await P.delete(`${a}/api/profile/remove-account/${p}/?accountId=${x}`,t).then(o=>{c(o.data.data)})}catch(o){console.error("Error posting data:",o)}}const D=Math.PI/180,M=({cx:x,cy:o,midAngle:h,innerRadius:j,outerRadius:v,percent:i,index:C})=>{const R=j+(v-j)*.5,le=x+R*Math.cos(-h*D),z=o+R*Math.sin(-h*D);return e.jsx("text",{x:le,y:z,fill:"white",textAnchor:le>x?"start":"end",dominantBaseline:"central",children:`${(i*100).toFixed(0)}%`})};return $?e.jsx(K,{className:"w-[641.3px] h-[340px]"}):e.jsxs(ae,{className:"w-full h-full",children:[e.jsxs("div",{className:" flex flex-row justify-between items-center mb-0",children:[e.jsx(se,{className:"w-[50%] flex items-start",children:e.jsx(te,{children:"Accounts"})}),e.jsxs(G,{onOpenChange:x=>b(x),className:"w-[50%] flex items-end",children:[e.jsx(W,{children:e.jsx(_,{className:"w-[50px] h-[35px] mt-[15px] mr-[30px] justify-center align-center hover:bg-accent",variant:"ghost",children:e.jsx(Aa,{className:"h-4 w-4"})})}),e.jsxs(Y,{className:"w-[80%] max-w-[500px]",children:[e.jsx(X,{children:e.jsx(q,{children:"Add New Account"})}),e.jsxs("div",{className:"flex flex-row justify-center items-center mt-[25px]",children:[e.jsxs(oe,{className:"colorDiv",children:[e.jsx(ce,{children:e.jsx("div",{className:"w-8 h-7 rounded-md mr-2 colorDiv",style:{backgroundColor:n.accountColor}})}),e.jsxs(ee,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:["Current Color",e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:n.accountColor}})]})}),e.jsx(E,{className:"h-72 w-[200px] rounded-md border",children:e.jsx("div",{className:"grid grid-cols-4 gap-[1px]",children:Q.length>0?Q.map((x,o)=>e.jsxs(Z,{onClick:()=>m(h=>({...h,accountColor:x.value})),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:`${x.value}`}})}),o%4===3&&e.jsx("div",{className:"w-full"})," "]},x.value)):e.jsx("div",{})})})]})]}),e.jsx(B,{className:"w-[200px]",defaultValue:n.accountTitle,placeholder:"Account Name",onChange:x=>m(o=>({...o,accountTitle:x.target.value}))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",onClick:()=>N(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Save"})})})})]})]})]}),e.jsxs(ne,{style:{width:"100%",height:"250px"},className:"flex flex-row m-0",children:[e.jsx("div",{style:{width:"50%",height:"256px"},children:e.jsx(E,{className:"h-[90%] w-full overflow-hidden",children:w?w.map(x=>e.jsxs(G,{onOpenChange:o=>b(o),children:[e.jsxs(W,{onClick:()=>{T(x)},className:"flex w-full py-[10px] px-[5px] rounded-md hover:bg-accent justify-between",children:[e.jsxs("div",{className:"flex flex-row",children:[e.jsx("div",{className:"flex w-6 h-6 mr-2 rounded-md colorDiv",style:{backgroundColor:`${x.accountColor}`}}),e.jsx("p",{className:"w-[60%] flex justify-start overflow-hidden whitespace-nowrap text-overflow-ellipsis",children:x.accountTitle})]}),x.balance>0?e.jsx("p",{className:"w-[40%] overflow-hidden",style:{color:"#25ff1dbd"},children:x.balance.toFixed(2)}):e.jsx("p",{className:"w-[40%] overflow-hidden",style:{color:"#ff1d1dbd"},children:x.balance.toFixed(2)})]}),f?e.jsxs(Y,{className:"w-[80%] max-w-[500px]",children:[e.jsxs(X,{children:[e.jsx(q,{children:f.accountTitle}),e.jsx(pe,{children:"Make Changes and Save"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex flex-row justify-center items-center my-[25px]",children:[e.jsxs(oe,{className:"colorDiv",children:[e.jsx(ce,{children:e.jsx("div",{className:"w-8 h-7 rounded-md mr-2 colorDiv",style:{backgroundColor:f.accountColor}})}),e.jsxs(ee,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:["Current Color",e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:f.accountColor}})]})}),e.jsx(E,{className:"h-72 w-[200px] rounded-md border",children:e.jsx("div",{className:"grid grid-cols-4 gap-[1px]",children:Q.length>0?Q.map((o,h)=>e.jsxs(Z,{onClick:()=>T(j=>({...j,accountColor:o.value})),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:`${o.value}`}})}),h%4===3&&e.jsx("div",{className:"w-full"})," "]},o.value)):e.jsx("div",{})})})]})]}),e.jsx(B,{className:"w-[200px]",defaultValue:f.accountTitle,placeholder:"Account Name",onChange:o=>T(h=>({...h,accountTitle:o.target.value}))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(G,{children:[e.jsx(W,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})}),e.jsxs(Y,{className:"w-[80%] max-w-[500px]",children:[e.jsxs(X,{children:[e.jsxs(q,{children:["Delete the ",f.accountTitle," ","account?"]}),e.jsxs(pe,{children:["This action cannot be undone and it will permanently delete your"," ",f.accountTitle," Account. Are you sure?"]})]}),e.jsxs("div",{className:"flex flex-row justify-end",children:[e.jsx(H,{children:e.jsx(_,{className:"w-[100px] h-[37px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Cancel"})})}),e.jsx(H,{children:e.jsx(_,{className:"ml-[10px] w-[100px] h-[37px] flex justify-center items-center",variant:"destructive",onClick:()=>A(f._id),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})})]})]})]}),e.jsx(H,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",onClick:()=>L(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Save"})})})]})]})]}):e.jsx(e.Fragment,{})]},x._id)):e.jsx("div",{children:"Loading..."})})}),e.jsx("div",{className:"flex justify-start align-start items-start",style:{width:"50%",height:"256px"},children:e.jsx(de,{children:e.jsx(Ae,{children:e.jsx(Fe,{data:w,cx:"50%",cy:"50%",labelLine:!1,label:M,outerRadius:"200px",fill:"#8884d8",dataKey:"balance",children:w.map((x,o)=>e.jsx(Pe,{fill:x.accountColor},x._id))})})})})]})]})}const qe="#25ff1dbd",Qe="#ff1d1dbd";function gt(){const{apiUrl:a,update:s,config:t,userData:l,userId:c,dims:u}=r.useContext(V),[p,y]=r.useState(null),[b,w]=r.useState(!0);return r.useEffect(()=>{w(!0),(async()=>{try{const $=await P.get(a+"/api/balance/last90days-expense-income-balance/"+c,t);if($.status===200){const d=$.data.data.map(f=>({...f,date:f.date.split("T")[0].split("-")[2]}));y(d),w(!1)}else $.status===204&&w(!0)}catch($){console.log($),w(!1)}})()},[l,c,s]),b?e.jsx(K,{className:"w-[700px] h-[515px]"}):e.jsxs(ae,{className:"w-full h-full flex flex-col align-stretch justify-stretch",children:[e.jsx(se,{className:"flex align-start justify-start",children:e.jsx(te,{className:"flex flex-row align-center justify-between",children:"Last 30 Days"})}),e.jsxs(ne,{className:"w-full h-full flex flex-col justify-center items-center",children:[e.jsx(de,{children:e.jsxs(Ee,{data:p,syncId:"anyId",margin:u.width>768&&{top:10,right:30,left:0,bottom:0},children:[e.jsx(Le,{dataKey:"date"}),u.width>768&&e.jsx(_e,{}),e.jsx(Re,{}),e.jsx(he,{type:"monotone",dataKey:"expense",stroke:Qe,fill:Qe}),e.jsx(he,{type:"monotone",dataKey:"income",stroke:qe,fill:qe}),e.jsx(As,{height:30,startIndex:60,dataKey:"date",fill:"#c9c9c9ce",stroke:"c9c9c9b2"})]})}),e.jsx(de,{children:e.jsxs(Fs,{data:p,syncId:"anyId",margin:u.width>768&&{top:10,right:30,left:0,bottom:0},children:[e.jsx(Le,{dataKey:"date"}),u.width>768&&e.jsx(_e,{}),e.jsx(Re,{}),e.jsx(Ps,{type:"monotone",dataKey:"balance",stroke:"#838383",fill:"#9494949d"})]})})]})]})}const Za=({className:a,...s})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:g("mx-auto flex w-full justify-center",a),...s});Za.displayName="Pagination";const Ga=r.forwardRef(({className:a,...s},t)=>e.jsx("ul",{ref:t,className:g("flex flex-row items-center gap-1",a),...s}));Ga.displayName="PaginationContent";const ie=r.forwardRef(({className:a,...s},t)=>e.jsx("li",{ref:t,className:g("",a),...s}));ie.displayName="PaginationItem";const fe=({className:a,isActive:s,size:t="icon",...l})=>e.jsx("a",{"aria-current":s?"page":void 0,className:g(Ne({variant:s?"outline":"ghost",size:t}),a),...l});fe.displayName="PaginationLink";const Wa=({className:a,...s})=>e.jsxs(fe,{"aria-label":"Go to previous page",size:"default",className:g("gap-1 pl-2.5",a),...s,children:[e.jsx(ja,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});Wa.displayName="PaginationPrevious";const Ja=({className:a,...s})=>e.jsxs(fe,{"aria-label":"Go to next page",size:"default",className:g("gap-1 pr-2.5",a),...s,children:[e.jsx("span",{children:"Next"}),e.jsx(Ue,{className:"h-4 w-4"})]});Ja.displayName="PaginationNext";const Xa=({className:a,...s})=>e.jsxs("span",{"aria-hidden":!0,className:g("flex h-9 w-9 items-center justify-center",a),...s,children:[e.jsx(Ls,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]});Xa.displayName="PaginationEllipsis";const jt="#25ff1dbd",yt="#ff1d1dbd";function bt(){const{apiUrl:a,update:s,setUpdate:t,config:l,userData:c,token:u,userId:p,setDialogIsOpen:y}=r.useContext(V),[b,w]=r.useState(null),[k,$]=r.useState(!0),[d,f]=r.useState(null),[T,n]=r.useState(null),[m,N]=r.useState(null),[L,A]=r.useState(!1);async function D(j){try{const v=await P.get(j,l);if(v.status===200&&c.categories.length>0&&c.accounts.length>0&&v.data.data){let i=v.data.data;const C=c.accounts.reduce((z,J)=>(z[J._id]={accountColor:J.accountColor,accountTitle:J.accountTitle},z),{}),R=c.categories.reduce((z,J)=>(z[J._id]={categoryColor:J.categoryColor,categoryTitle:J.categoryTitle},z),{}),le=i.map(z=>{const J=C[z.accountId],os=z.toAccountId?C[z.toAccountId]:"",cs=R[z.categoryId];return{...z,...J,...cs,toAccountTitle:os.accountTitle}});le.sort((z,J)=>new Date(J.date)-new Date(z.date)),N(v.data.currentPage),n(v.data.totalPages),w(le),$(!1)}else v.status===204&&$(!0)}catch(v){console.log(v),c&&$(!1)}}r.useEffect(()=>{$(!0),D(a+"/api/transaction/read/"+p)},[c,s]);function M(){const{...j}=d,v={...j};try{p&&u&&v?(P.put(a+"/api/transaction/update/"+p,v,l).then(i=>{console.log("Updated transaction")}),t(i=>!i)):console.log("Missing Data")}catch(i){console.error("Error adding category:",i)}}async function x(){try{const j=await P.delete(a+"/api/transaction/delete/"+p+"/"+d._id,l);t(v=>!v)}catch(j){console.log(j)}}const o=j=>{const v=[];return v.push(e.jsx(ie,{children:e.jsx(fe,{href:"#",onClick:i=>{h(i,m),i.preventDefault()},children:m})},m)),m>1&&v.unshift(e.jsx(ie,{children:e.jsx(fe,{href:"#",onClick:i=>{h(i,m-1),i.preventDefault()},children:m-1})},m-1)),m<j&&v.push(e.jsx(ie,{children:e.jsx(fe,{href:"#",onClick:i=>{h(i,m+1),i.preventDefault()},children:m+1})},m+1)),v};function h(j,v){D(`${a}/api/transaction/read/${p}?page=${v}`)}return k&&!b?e.jsx(K,{className:"w-[390px] h-[1150px]"}):e.jsxs(ae,{className:"w-full h-full flex flex-col align-stretch justify-stretch",children:[e.jsx(se,{className:"flex align-start justify-start h-auto",children:e.jsx(te,{className:"flex flex-row align-center justify-between mb-[10px]",children:"History"})}),e.jsxs(ne,{className:"flex flex-col h-full w-full",children:[e.jsx(E,{className:"flex justify-center align-start w-full h-[1050px] ml-0",children:b?b.map((j,v)=>e.jsxs(G,{onOpenChange:i=>y(i),className:"h-[90%] max-w-[320px] md:max-w-lg lg:max-w-2xl",children:[e.jsx(W,{className:"w-full",onClick:()=>f(j),children:e.jsxs("div",{className:"flex flex-row items-center justify-between  rounded-md hover:bg-accent",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:v+1}),e.jsxs("div",{className:"flex flex-col w-full mr-[10px]",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between text-sm text-muted-foreground",children:[j.date.split("T")[0],e.jsx("div",{className:"flex flex-row items-end justify-end text-sm text-muted-foreground",children:j.accountTitle})]}),j.type==="expense"?e.jsxs("div",{className:"flex flex-row  items-center justify-between m-[5px] ml-[20px]",children:[e.jsx("div",{className:"flex flex-row items-start justify-start",style:{fontSize:"20px",color:yt},children:j.amount}),e.jsx("div",{className:"flex flex-row items-center justify-center mr-[20px]",children:j.categoryTitle})]}):j.type==="income"?e.jsxs("div",{className:"flex flex-row  items-center justify-between m-[5px] ml-[20px]",children:[e.jsx("div",{className:"flex flex-row items-start justify-start",style:{fontSize:"20px",color:jt},children:j.amount}),e.jsx("div",{className:"flex flex-row items-center justify-center mr-[20px]",children:j.categoryTitle})]}):e.jsxs("div",{className:"flex flex-row  items-center justify-between m-[5px] ml-[20px] mr-0",children:[e.jsx("div",{className:"flex flex-row items-start justify-start",style:{fontSize:"20px"},children:j.amount}),e.jsxs("div",{className:"flex flex-row items-center justify-center text-sm text-muted-foreground",children:["-",">"," ",j.toAccountTitle]})]}),e.jsx("div",{className:"flex justify-end text-sm text-muted-foreground",children:"Balance: 100"}),e.jsx("div",{className:"w-full h-[0px] m-[5px] ",style:{borderBottom:"0.5px solid #9494944d",display:"grid",justifySelf:"center"}})]},j._id)]})}),e.jsx(Y,{className:"h-[90%] max-w-[320px] md:max-w-lg lg:max-w-2xl min-h-[610px]",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Ya,{defaultValue:d.accountId,className:"h-[80%] w-full max-w-[275px] md:max-w-lg lg:max-w-2xl",children:e.jsxs(E,{className:"h-[50px] w-full p-1",children:[e.jsx(Be,{className:"flex justify-center items-center",children:e.jsx("div",{className:"flex flex-row justify-between items-center",children:c.accounts.length>0?c.accounts.map((i,C)=>e.jsx(Ve,{name:"account",value:i._id,className:"ml-1 mr-1",style:{color:i.accountColor},onClick:()=>{f(R=>({...R,accountId:i._id}))},children:i.accountTitle},C)):e.jsx("div",{})})}),e.jsx(De,{orientation:"horizontal"})]})}),e.jsxs("div",{className:"h-full w-full md:m-2 flex flex-col items-center justify-between",children:[e.jsx("div",{className:"mb-2 md:m-2 flex justify-center items-center",children:e.jsx(B,{style:{height:"70px",width:"60%",fontSize:"30px",textAlign:"center"},className:"flex justify-center align-center w-[250px] md:w-8/12 h-[70px]",type:"number",min:"0",placeholder:"Transaction Amount",name:"amount",value:d.amount,onChange:i=>{f(C=>({...C,amount:i.target.value}))}})}),e.jsx("div",{className:"block md:hidden",children:e.jsxs(Ke,{modal:!0,open:L,onOpenChange:A,children:[e.jsx(Ye,{className:"w-full",asChild:!0,children:e.jsxs(U,{variant:"outline",className:g("w-full justify-start text-left font-normal",!d.date&&"text-muted-foreground"),children:[e.jsx(ba,{className:"mr-2 h-4 w-4"}),d.date?va(d.date,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(ke,{className:"w-auto p-0",align:"start",children:e.jsx(ge,{mode:"single",selected:d.date,name:"date",disabled:i=>i>new Date||i<new Date("1900-01-01"),onSelect:i=>{i.setHours(12),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),f(C=>({...C,date:i}))},className:"rounded-md border h-full w-full",initialFocus:!0})})]})}),e.jsxs("div",{className:"flex flex-row justify-center sm:justify-between items-start md:mt-10 mt-2",children:[e.jsxs("div",{className:"flex flex-col justify-start items-start",children:[e.jsx("div",{className:"flex items-center m-2 ml-1",children:e.jsxs(re,{name:"type",defaultValue:d.type,className:"flex flex-row lg:flex-row md:flex-col lg:items-center items-start",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"expense",id:"expense",onClick:()=>{f(i=>({...i,type:"expense"}))}}),e.jsx(S,{htmlFor:"expense",children:"Expense"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"income",id:"income",onClick:()=>{f(i=>({...i,type:"income"}))}}),e.jsx(S,{htmlFor:"income",children:"Income"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"transfer",id:"transfer",onClick:()=>{f(i=>({...i,type:"transfer"}))}}),e.jsx(S,{htmlFor:"transfer",children:"Transfer"})]})]})}),e.jsx(E,{className:"lg:h-[298px] lg:w-[231.36px] md:w-[150px] md:h-[240px] h-[180px] w-full rounded-md border px-2 pt-2 md:px-4 md:pt-4 mr-6",children:e.jsx(re,{name:"category",defaultValue:d.categoryId,children:d.type==="expense"&&c.categories.length>0?c.categories.map((i,C)=>{if(i.categoryType==="expense")return e.jsxs("div",{className:"flex flex-row items-center justify-start",children:[e.jsx(F,{style:{backgroundColor:i.categoryColor},className:"w-5 h-5 mr-2",name:"category",value:i._id,id:C,onClick:()=>{f(R=>({...R,categoryId:i._id,toAccountId:"",fromAccountId:""}))}}),e.jsx(S,{htmlFor:C,className:"bg:text-lg",children:i.categoryTitle})]},C)}):d.type==="income"&&c.categories.length>0?c.categories.map((i,C)=>{if(i.categoryType==="income")return e.jsxs("div",{className:"flex flex-row items-center justify-start",children:[e.jsx(F,{style:{backgroundColor:i.categoryColor},className:"w-5 h-5 mr-2",name:"category",value:i._id,id:C,onClick:()=>{f(R=>({...R,categoryId:i._id,toAccountId:"",fromAccountId:""}))}}),e.jsx(S,{htmlFor:C,className:"bg:text-lg",children:i.categoryTitle})]},C)}):d.type==="transfer"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",children:"Transfer to Account"}),c.accounts.map((i,C)=>e.jsx("div",{className:"flex flex-row items-center justify-start",children:i._id===d.accountId?e.jsxs(e.Fragment,{children:[e.jsx(F,{style:{backgroundColor:i.accountColor},disabled:!0,className:"w-5 h-5 mr-2",name:"account",value:i._id,id:C,onClick:()=>{f(R=>({...R,toAccountId:i._id,fromAccountId:""}))}}),e.jsx(S,{htmlFor:C,className:"bg:text-lg text-gray-600",children:i.accountTitle})]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{style:{backgroundColor:i.accountColor},className:"w-5 h-5 mr-2",name:"account",value:i._id,id:C,onClick:()=>{f(R=>({...R,toAccountId:i._id,fromAccountId:""}))}}),e.jsx(S,{htmlFor:C,className:"bg:text-lg",children:i.accountTitle})]})},C))]}):e.jsx("div",{children:"Nothing to SHow Here ..."})})})]}),e.jsx("div",{className:"lg:m-2 hidden md:block",children:e.jsx(ge,{mode:"single",selected:d.date,name:"date",value:d.date,initialFocus:!0,disabled:i=>i>new Date||i<new Date("1900-01-01"),onSelect:i=>{f(C=>({...C,date:i}))},className:"rounded-md border h-[322px] w-[250px]"})})]}),e.jsxs("div",{className:"lg:w[450px] w-full flex flex-col items-center mt-4",children:[e.jsx(S,{className:"mb-2 ml-1",children:"Description"}),e.jsx(He,{className:"w-full h-[70px]",name:"description",placeholder:"Enter more details here.",value:d.description,onChange:i=>{f(C=>({...C,description:i.target.value}))}})]}),e.jsxs("div",{className:"w-full flex justify-between align-center m-2 mt-7",children:[e.jsxs(G,{className:"w-[50%] flex items-end",children:[e.jsx(W,{children:e.jsx(_,{className:"w-[100px] h-[38px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})}),e.jsxs(Y,{className:"w-[80%] max-w-[500px]",children:[e.jsxs(X,{children:[e.jsx(q,{children:"Are you sure you want to delete the transaction?"}),e.jsx(pe,{children:"This action cannot be undone. This will permanently delete the transaction."})]}),e.jsx(Ka,{children:e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(U,{className:"w-[100px] flex align-end items-end",variant:"outline",children:"cancel"}),e.jsx(U,{className:"w-[100px] flex align-end items-end ml-[10px]",variant:"destructive",onClick:()=>x(),children:"delete"})]})})})]})]}),e.jsx(H,{asChild:!0,children:e.jsx(U,{variant:"default",onClick:M,children:"Save Changes"})})]})]})]}):e.jsx("div",{children:"Loading ..."})})]},v)):e.jsx(e.Fragment,{})}),e.jsx(Za,{className:"felx justify-center align-end items-end h-auto mt-[20px] w-11/12",children:e.jsxs(Ga,{children:[e.jsx(ie,{children:e.jsx(Wa,{onClick:j=>{h(j,m-1),j.preventDefault()},href:"#"})}),o(T),e.jsx(ie,{children:e.jsx(Xa,{})}),e.jsx(ie,{children:e.jsx(Ja,{onClick:j=>{m<T&&h(j,m+1),j.preventDefault()},href:"#"})})]})})]})]})}const qa=Vs,Qa=Hs,Ze=r.forwardRef(({className:a,children:s,...t},l)=>e.jsxs(Fa,{ref:l,className:g("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...t,children:[s,e.jsx(_s,{asChild:!0,children:e.jsx(Rs,{className:"h-4 w-4 opacity-50"})})]}));Ze.displayName=Fa.displayName;const es=r.forwardRef(({className:a,...s},t)=>e.jsx(Pa,{ref:t,className:g("flex cursor-default items-center justify-center py-1",a),...s,children:e.jsx(zs,{})}));es.displayName=Pa.displayName;const as=r.forwardRef(({className:a,...s},t)=>e.jsx(La,{ref:t,className:g("flex cursor-default items-center justify-center py-1",a),...s,children:e.jsx(Ms,{})}));as.displayName=La.displayName;const Ge=r.forwardRef(({className:a,children:s,position:t="popper",...l},c)=>e.jsx(Us,{children:e.jsxs(_a,{ref:c,className:g("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:t,...l,children:[e.jsx(es,{}),e.jsx(Es,{className:g("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(as,{})]})}));Ge.displayName=_a.displayName;const vt=r.forwardRef(({className:a,...s},t)=>e.jsx(Ra,{ref:t,className:g("px-2 py-1.5 text-sm font-semibold",a),...s}));vt.displayName=Ra.displayName;const O=r.forwardRef(({className:a,children:s,...t},l)=>e.jsxs(za,{ref:l,className:g("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...t,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Os,{children:e.jsx(Me,{className:"h-4 w-4"})})}),e.jsx(Bs,{children:s})]}));O.displayName=za.displayName;const wt=r.forwardRef(({className:a,...s},t)=>e.jsx(Ma,{ref:t,className:g("-mx-1 my-1 h-px bg-muted",a),...s}));wt.displayName=Ma.displayName;function Nt(){const{apiUrl:a,update:s,config:t,userData:l,userId:c,balanceData:u,dims:p}=r.useContext(V);let y={};const[b,w]=r.useState(!0),[k,$]=r.useState(null),[d,f]=r.useState(null),[T,n]=r.useState(null),[m,N]=r.useState("this_month"),[L,A]=r.useState();async function D(o){try{const h=await P.get(`${a}/api/balance/category-analytic/${c}?period=${o}`,t);if(h.status===200&&l.categories.length>0&&l.accounts.length>0&&(h.data.pieData||h.data.barData)){let j=h.data.pieData.income,v=h.data.pieData.expense,i=h.data.barData;l.categories.map(C=>{y[C._id]={color:C.categoryColor,title:C.categoryTitle}}),A(y),j=j.map(C=>({...y[C.categoryId],...C})),v=v.map(C=>({...y[C.categoryId],...C})),n(i),$(v),f(j),w(!1)}else h.status===204&&w(!0)}catch(h){console.log(h),w(!1)}}r.useEffect(()=>{w(!0),D(m),l&&u&&w(!1)},[l,s]);const M=Math.PI/180,x=({cx:o,cy:h,midAngle:j,innerRadius:v,outerRadius:i,percent:C})=>{const R=v+(i-v)*.5,le=o+R*Math.cos(-j*M),z=h+R*Math.sin(-j*M);return e.jsx("text",{x:le,y:z,fill:"white",textAnchor:le>o?"start":"end",dominantBaseline:"central",children:`${(C*100).toFixed(0)}%`})};return e.jsxs(ae,{className:"w-full h-full flex flex-col",children:[e.jsxs("div",{className:" flex flex-row justify-between items-center",children:[e.jsx(se,{className:"w-[50%] flex items-start",children:e.jsx(te,{children:"Category Analytics"})}),e.jsxs(qa,{onValueChange:o=>{N(o),D(o)},defaultValue:m,children:[e.jsx(Ze,{className:"w-[130px] mr-[30px] hover:bg-accent",children:e.jsx(Qa,{placeholder:"Choose Period"})}),e.jsxs(Ge,{children:[e.jsx(O,{value:"this_week",children:"This Week"}),e.jsx(O,{value:"this_month",children:"This Month"}),e.jsx(O,{value:"last_3_months",children:"Last 3 Months"}),e.jsx(O,{value:"last_6_months",children:"Last 6 Months"}),e.jsx(O,{value:"this_year",children:"This Year"}),e.jsx(O,{disabled:!0,value:"max",children:"Custom"})]})]})]}),b&&p.width>10?e.jsxs("div",{className:"flex lg:flex-row flex-col justify-between px-[40px]",children:[e.jsx("div",{className:"ml-[55px]",children:e.jsx(K,{className:"lg:w-12/4 w-full lg:h-[350px]"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(K,{className:"w-[160px] h-[160px] rounded-full mx-[15px] mb-[20px] mt-[8px]"}),e.jsx(K,{className:"w-[160px] h-[160px] rounded-full mx-[15px]"})]})]}):e.jsxs(ne,{className:"flex flex-col lg:flex-row justify-center items-center w-full h-full",children:[e.jsx("div",{className:"flex flex-row lg:flex-col w-full h-[60%] lg:w-[75%] lg:h-full",children:e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(Ee,{data:T,margin:p.width>768&&{top:20,right:30,left:20,bottom:5},children:[e.jsx(Le,{dataKey:"gap"}),p.width>768&&e.jsx(_e,{}),e.jsx(Re,{labelFormatter:(o,h)=>(h.forEach(j=>{j.name=L[j.dataKey].title}),{keys:o,values:h})}),l.categories.length>0?l.categories.map((o,h)=>o.categoryType==="expense"?e.jsx(he,{dataKey:o._id,stackId:"expense",fill:o.categoryColor},h):o.categoryType==="income"?e.jsx(he,{dataKey:o._id,stackId:"income",fill:o.categoryColor},h):e.jsx(e.Fragment,{})):e.jsx("div",{})]})})}),e.jsxs("div",{className:"flex flex-row lg:flex-col w-full h-[40%] lg:w-[25%] lg:h-[100%]",children:[e.jsx(de,{width:"100%",height:"100%",children:e.jsx(Ae,{children:e.jsx(Fe,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:x,fill:"#8884d8",dataKey:"amount",children:d?d.map((o,h)=>e.jsx(Pe,{fill:o.color},o.categoryId)):e.jsx(K,{})})})}),e.jsx(de,{width:"100%",height:"100%",children:e.jsx(Ae,{children:e.jsx(Fe,{data:k,cx:"50%",cy:"50%",labelLine:!1,label:x,fill:"#8884d8",dataKey:"amount",children:k?k.map((o,h)=>e.jsx(Pe,{fill:o.color},o.categoryId)):e.jsx(K,{})})})})]})]})]})}const ea="#25ff1dbd",Te="#ff1d1dbd";function Ct(){const{apiUrl:a,update:s,config:t,userData:l,userId:c,dims:u}=r.useContext(V),[p,y]=r.useState(null),[b,w]=r.useState("this_month"),[k,$]=r.useState(!0);async function d(n){try{const m=await P.get(a+"/api/balance/sankey/"+c+`?period=${n}`,t);if(m.status===200&&l.accounts.length>0&&l.categories.length>0&&m.data.sankeyData){let N={};l.accounts.map(o=>{N[o._id]={color:o.accountColor,title:o.accountTitle}});let L={};l.categories.map(o=>{L[o._id]={color:o.categoryColor,title:o.categoryTitle}});let A=[],D=[],M=0,x=0;m.data.sankeyData.forEach(o=>{if(o.type==="initial"&&N[o.accountId]){const h=o.totalAmount;h>=0?(A.push({id:`${N[o.accountId].title} (initial)`,nodeColor:N[o.accountId].color}),D.push({source:`${N[o.accountId].title} (initial)`,target:"Inflow",value:h})):h<0&&(A.map(j=>j.id==="Old Debts"&&j.id!==N[o.accountId].title)?(A.push({id:`${N[o.accountId].title} (initial)`,nodeColor:N[o.accountId].color}),A.push({id:"Old Debts",nodeColor:Te}),D.push({source:"Inflow",target:"Old Debts",value:-h}),D.push({source:"Old Debts",target:`${N[o.accountId].title} (initial)`,value:-h})):A.map(j=>j.id==="Old Debts")&&(D.push({source:"Inflow",target:"Old Debts",value:-h}),D.push({source:"Old Debts",target:`${N[o.accountId].title} (initial)`,value:-h})))}else if(o.type==="final"&&N[o.accountId]){const h=o.totalAmount;h>=0?(A.push({id:N[o.accountId].title,nodeColor:N[o.accountId].color}),D.push({source:"Total Income",target:N[o.accountId].title,value:h})):h<0&&(A.push({id:N[o.accountId].title,nodeColor:N[o.accountId].color}),A.push({id:"Current Debts",nodeColor:Te}),D.push({source:N[o.accountId].title,target:"Current Debts",value:h}),D.push({source:"Current Debts",target:"Inflow",value:h})),x+=h>0?h:-h}else if(o.type==="income"&&L[o.categoryId]){const h=o.totalAmount;A.push({id:L[o.categoryId].title,nodeColor:L[o.categoryId].color}),D.push({source:L[o.categoryId].title,target:"Inflow",value:h})}else if(o.type==="expense"&&L[o.categoryId]){const h=o.totalAmount;M+=h>0?h:-h,A.push({id:L[o.categoryId].title,nodeColor:L[o.categoryId].color}),D.push({source:"Outflow",target:L[o.categoryId].title,value:h})}else console.log("type undefined")}),A.push({id:"Inflow",nodeColor:ea},{id:"Outflow",nodeColor:Te},{id:"Total Income",nodeColor:ea}),D.push({source:"Inflow",target:"Outflow",value:M},{source:"Inflow",target:"Total Income",value:x}),y({nodes:A,links:D}),$(!1)}else $(!0)}catch(m){console.error(m),$(!1)}}const f=Math.max(8,u.width/100),T=Math.max(16,u.width/50);return r.useEffect(()=>{d(b)},[l,s]),k?e.jsx(K,{className:"w-[951.3px] h-[650px]"}):e.jsxs(ae,{className:" w-full h-full flex flex-col align-stretch justify-stretch",children:[e.jsxs("div",{className:" flex flex-row justify-between items-center",children:[e.jsx(se,{className:" w-[50%] flex items-start",children:e.jsx(te,{children:"Cash Flow"})}),e.jsxs(qa,{onValueChange:n=>{w(n),d(n)},defaultValue:b,children:[e.jsx(Ze,{className:" w-[130px] mt-[15px] mr-[30px] hover:bg-accent",children:e.jsx(Qa,{placeholder:"Choose Period"})}),e.jsxs(Ge,{children:[e.jsx(O,{value:"this_week",children:"This Week"}),e.jsx(O,{value:"this_month",children:"This Month"}),e.jsx(O,{value:"last_3_months",children:"Last 3 Months"}),e.jsx(O,{value:"last_6_months",children:"Last 6 Months"}),e.jsx(O,{value:"this_year",children:"This Year"}),e.jsx(O,{value:"last_3_years",children:"Last 3 Years"}),e.jsx(O,{disabled:!0,value:"max",children:"Custom"})]})]})]}),e.jsx(ne,{className:" flex justify-center items-center w-[100%] h-full",children:e.jsx(Ks,{data:p,align:"justify",colors:n=>n.nodeColor,nodeOpacity:1,nodeHoverOthersOpacity:.35,nodeThickness:f,nodeSpacing:T,nodeBorderWidth:0,nodeBorderColor:{from:"color",modifiers:[["darker",.8]]},nodeBorderRadius:2,linkOpacity:.5,linkHoverOthersOpacity:.1,linkContract:3,enableLinkGradient:!0,labelPosition:"outside",labelOrientation:"vertical",labelPadding:16,borderColor:{theme:"background"},labelTextColor:{from:"color",modifiers:[["darker",1]]},linkColor:n=>n.source.nodeColor})})]})}function $t(){const{apiUrl:a,config:s,userData:t,setUserData:l,userId:c,setDialogIsOpen:u}=r.useContext(V),[p,y]=r.useState({categoryTitle:"",categoryColor:Ce[0].value,categoryType:"expense"}),[b,w]=r.useState(null),[k,$]=r.useState(!0);r.useEffect(()=>{$(!0),t.accounts.length>0&&$(!1)},[t]);async function d(){if(c&&p.categoryTitle)try{await P.put(a+"/api/profile/add-category/"+c,p,s).then(n=>{l(n.data.data)})}catch(n){console.error("Error posting data:",n)}else console.log("insert category name");y({categoryTitle:"",categoryColor:Ce[0].value,categoryType:"expense"})}async function f(){if(c&&b._id)try{await P.put(a+"/api/profile/update-category/"+c,b,s).then(n=>{l(n.data.data)})}catch(n){console.error(n)}else console.log("error updating the category")}async function T(){try{const n=await P.delete(a+"/api/profile/remove-category/"+c+"/"+b._id,s);l(n.data.data)}catch(n){console.log(n)}}return k?e.jsx(K,{className:"w-[641.3] h-[340px]"}):e.jsxs(ae,{className:"w-full h-full",children:[e.jsxs("div",{className:" flex flex-row justify-between items-center",children:[e.jsx(se,{className:"w-[50%] flex items-start",children:e.jsx(te,{children:"Categoies"})}),e.jsxs(G,{onOpenChange:n=>u(n),className:"w-[50%] flex items-end",children:[e.jsx(W,{children:e.jsx(_,{className:"w-[50px] h-[35px] mt-[15px] mr-[30px] justify-center align-center hover:bg-accent",variant:"ghost",children:e.jsx(Aa,{className:"h-4 w-4"})})}),e.jsxs(Y,{className:"w-[80%] max-w-[500px]",children:[e.jsx(X,{children:e.jsx(q,{children:"Add New Category"})}),p?e.jsxs(e.Fragment,{children:[e.jsxs(re,{name:"type",defaultValue:p.categoryType,className:"flex flex-row align-center justify-center items-center mt-[25px]",children:[e.jsxs("div",{className:"flex items-center space-x-2 mr-10",children:[e.jsx(F,{name:"type",value:"expense",id:"expense",onClick:()=>y(n=>({...n,categoryType:"expense"}))}),e.jsx(S,{htmlFor:"expense",children:"Expense"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"income",id:"income",onClick:()=>y(n=>({...n,categoryType:"income"}))}),e.jsx(S,{htmlFor:"income",children:"Income"})]})]}),e.jsxs("div",{className:"flex flex-row justify-center items-center my-[25px]",children:[e.jsxs(oe,{className:"colorDiv",children:[e.jsx(ce,{children:e.jsx("div",{className:"w-8 h-7 rounded-md mr-2 colorDiv",style:{backgroundColor:p.categoryColor}})}),e.jsxs(ee,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:["Current Color",e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:p.categoryColor}})]})}),e.jsx(E,{className:"h-72 w-[200px] rounded-md border",children:e.jsx("div",{className:"grid grid-cols-4 gap-[1px]",children:Q.length>0?Q.map((n,m)=>e.jsxs(Z,{onClick:()=>y(N=>({...N,categoryColor:n.value})),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:`${n.value}`}})}),m%4===3&&e.jsx("div",{className:"w-full"})," "]},n.value)):e.jsx("div",{})})})]})]}),e.jsx(B,{className:"w-[200px]",defaultValue:p.categoryTitle,placeholder:"Category Name",onChange:n=>y(m=>({...m,categoryTitle:n.target.value}))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",onClick:()=>d(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Save"})})})})]}):e.jsx(e.Fragment,{})]})]})]}),e.jsxs(ne,{className:"flex flex-row h-[100%] w-[100%]",children:[e.jsxs("div",{className:"w-[50%] flex flex-col justify-start items-start m-0 sm:ml-[25px]",children:[e.jsxs("div",{className:"w-full flex flex-row align-center justify-center items-center mb-4",children:[e.jsx("div",{className:"w-[40%] h-[0px]",style:{borderBottom:"0.5px solid #9494944d"}}),e.jsx("div",{children:e.jsx("p",{className:"mr-2 ml-2 text-sm text-muted-foreground",children:"Expense"})}),e.jsx("div",{className:"w-[40%] h-[0px]",style:{borderBottom:"0.5px solid #9494944d"}})]}),e.jsx(E,{className:"h-[210px] w-full",children:e.jsxs(G,{onOpenChange:n=>u(n),children:[e.jsx("div",{className:"flex flex-col",children:t.categories.length>0?t.categories.map((n,m)=>{if(n.categoryType==="expense")return e.jsx(W,{className:" rounded-md hover:bg-accent mr-2",children:e.jsxs("div",{className:"flex flex-row align-center items-center py-2 pl-2",onClick:()=>{w(n)},children:[e.jsx("div",{className:"w-5 h-5 rounded-md mr-2 colorDiv",style:{backgroundColor:`${n.categoryColor}`}}),n.categoryTitle]})},m)}):e.jsx("div",{})}),e.jsxs(Y,{className:"w-[80%] max-w-[500px]",children:[e.jsx(X,{children:e.jsx(q,{children:"Click Save to Apply Changes"})}),b?e.jsxs(e.Fragment,{children:[e.jsxs(re,{name:"type",defaultValue:b.categoryType,className:"flex flex-row align-center justify-center items-center mt-[25px]",children:[e.jsxs("div",{className:"flex items-center space-x-2 mr-10",children:[e.jsx(F,{name:"type",value:"expense",id:"expense",onClick:()=>w(n=>({...n,categoryType:"expense"}))}),e.jsx(S,{htmlFor:"expense",children:"Expense"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"income",id:"income",onClick:()=>w(n=>({...n,categoryType:"income"}))}),e.jsx(S,{htmlFor:"income",children:"Income"})]})]}),e.jsxs("div",{className:"flex flex-row justify-center items-center my-[25px]",children:[e.jsxs(oe,{className:"colorDiv",children:[e.jsx(ce,{children:e.jsx("div",{className:"w-8 h-7 rounded-md mr-2 colorDiv",style:{backgroundColor:b.categoryColor}})}),e.jsxs(ee,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:["Current Color",e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:b.categoryColor}})]})}),e.jsx(E,{className:"h-72 w-[200px] rounded-md border",children:e.jsx("div",{className:"grid grid-cols-4 gap-[1px]",children:Q.length>0?Q.map((n,m)=>e.jsxs(Z,{onClick:()=>w(N=>({...N,categoryColor:n.value})),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:`${n.value}`}})}),m%4===3&&e.jsx("div",{className:"w-full"})," "]},n.value)):e.jsx("div",{})})})]})]}),e.jsx(B,{className:"w-[200px]",defaultValue:b.categoryTitle,placeholder:"Category Name",onChange:n=>w(m=>({...m,categoryTitle:n.target.value}))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(G,{children:[e.jsx(W,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})}),e.jsxs(Y,{className:"w-[80%] max-w-[500px]",children:[e.jsxs(X,{children:[e.jsxs(q,{children:["Delete the ",b.categoryTitle," category, and it's transactions?"]}),e.jsxs(pe,{children:["This action cannot be undone and it will permanently delete your"," ",b.categoryTitle," category and all related transactions. Are you sure?"]})]}),e.jsxs("div",{className:"flex flex-row justify-end",children:[e.jsx(H,{children:e.jsx(_,{className:"w-[100px] h-[37px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Cancel"})})}),e.jsx(H,{children:e.jsx(_,{className:"ml-[10px] w-[100px] h-[37px] flex justify-center items-center",variant:"destructive",onClick:()=>T(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})})]})]})]}),e.jsx(H,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",onClick:()=>f(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Save"})})})]})]}):e.jsx(e.Fragment,{})]})]})})]}),e.jsxs("div",{className:"w-[50%] flex flex-col justify-start items-start m-0 sm:ml-[30px]",children:[e.jsxs("div",{className:"w-full flex flex-row align-center justify-center items-center mb-4",children:[e.jsx("div",{className:"w-[40%] h-[0px]",style:{borderBottom:"0.5px solid #9494944d"}}),e.jsx("div",{children:e.jsx("p",{className:"mr-2 ml-2 text-sm text-muted-foreground",children:"Income"})}),e.jsx("div",{className:"w-[40%] h-[0px]",style:{borderBottom:"0.5px solid #9494944d"}})]}),e.jsx(E,{className:"h-[210px] w-full",children:e.jsxs(G,{onOpenChange:n=>u(n),children:[e.jsx("div",{className:"flex flex-col",children:t.categories.length>0?t.categories.map((n,m)=>{if(n.categoryType==="income")return e.jsx(W,{className:"rounded-md hover:bg-accent sm:mr-2",children:e.jsxs("div",{className:"flex flex-row align-center items-center py-2 pl-2",onClick:()=>{w(n)},children:[e.jsx("div",{className:"w-5 h-5 rounded-md mr-2 colorDiv",style:{backgroundColor:`${n.categoryColor}`}}),n.categoryTitle]})},m)}):e.jsx("div",{})}),e.jsxs(Y,{className:"w-[80%] max-w-[500px]",children:[e.jsx(X,{children:e.jsx(q,{children:"Click Save to Apply Changes"})}),b?e.jsxs(e.Fragment,{children:[e.jsxs(re,{name:"type",defaultValue:b.categoryType,className:"flex flex-row align-center justify-center items-center mt-[25px]",children:[e.jsxs("div",{className:"flex items-center space-x-2 mr-10",children:[e.jsx(F,{name:"type",value:"expense",id:"expense",onClick:()=>w(n=>({...n,categoryType:"expense"}))}),e.jsx(S,{htmlFor:"expense",children:"Expense"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{name:"type",value:"income",id:"income",onClick:()=>w(n=>({...n,categoryType:"income"}))}),e.jsx(S,{htmlFor:"income",children:"Income"})]})]}),e.jsxs("div",{className:"flex flex-row justify-center items-center my-[25px]",children:[e.jsxs(oe,{className:"colorDiv",children:[e.jsx(ce,{children:e.jsx("div",{className:"w-8 h-7 rounded-md mr-2 colorDiv",style:{backgroundColor:b.categoryColor}})}),e.jsxs(ee,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:["Current Color",e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:b.categoryColor}})]})}),e.jsx(E,{className:"h-72 w-[200px] rounded-md border",children:e.jsx("div",{className:"grid grid-cols-4 gap-[1px]",children:Q.length>0?Q.map((n,m)=>e.jsxs(Z,{onClick:()=>w(N=>({...N,categoryColor:n.value})),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"w-8 h-7 rounded-md colorDiv",style:{backgroundColor:`${n.value}`}})}),m%4===3&&e.jsx("div",{className:"w-full"})," "]},n.value)):e.jsx("div",{})})})]})]}),e.jsx(B,{className:"w-[200px]",defaultValue:b.categoryTitle,placeholder:"Category Name",onChange:n=>w(m=>({...m,categoryTitle:n.target.value}))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(G,{children:[e.jsx(W,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})}),e.jsxs(Y,{className:"w-[80%] max-w-[500px]",children:[e.jsxs(X,{children:[e.jsxs(q,{children:["Delete the ",b.categoryTitle," category?"]}),e.jsxs(pe,{children:["This action cannot be undone and it will permanently delete your"," ",b.categoryTitle," category. Are you sure?"]})]}),e.jsxs("div",{className:"flex flex-row justify-end",children:[e.jsx(H,{children:e.jsx(_,{className:"w-[100px] h-[37px] flex justify-center items-center",variant:"outline",children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Cancel"})})}),e.jsx(H,{children:e.jsx(_,{className:"ml-[10px] w-[100px] h-[37px] flex justify-center items-center",variant:"destructive",onClick:()=>T(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Delete"})})})]})]})]}),e.jsx(H,{children:e.jsx(_,{className:"w-[70px] h-[37px] flex justify-center items-center",onClick:()=>f(),children:e.jsx("p",{style:{fontSize:"small",margin:"0"},children:"Save"})})})]})]}):e.jsx(e.Fragment,{})]})]})})]})]})]})}const It="https://api.madanilab.site",aa={clientId:"06b0630f66b18f473a617819261e2e6a.access",clientSecret:"2554796ee90aee81b35787f4d427b86bd1d0cece38c6d9d8bee9336b88b52eb6"},We=r.createContext();function Dt(){const[a,s]=r.useState(null),[t,l]=r.useState(!0),{token:c,userData:u,update:p,userId:y,isAuthenticated:b}=r.useContext(V),w=Intl.DateTimeFormat().resolvedOptions().timeZone,k=c?{headers:{Authorization:c,"Content-Type":"application/json","X-User-Timezone":w,"CF-Access-Client-Id":aa.clientId,"CF-Access-Client-Secret":aa.clientSecret}}:null;async function $(){try{const d=await P.get(It+"/api/balance/timeframe-total-balance/"+y,k);s(d.data.balance)}catch(d){console.log(d)}}return r.useEffect(()=>{l(!0),u&&($(),l(!1))},[u,p]),t?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"Loading..."}):e.jsx(We.Provider,{value:{balanceData:a},children:e.jsxs("div",{className:"main",children:[e.jsx("div",{className:"add-transaction",children:e.jsx(rt,{})}),e.jsxs("div",{className:"top-section",children:[e.jsx("div",{className:"total-balance",children:e.jsx(it,{})}),e.jsx("div",{className:"income-expense-balance",children:e.jsx(dt,{})}),e.jsx("div",{className:"account-analytic",children:e.jsx(pt,{})}),e.jsx("div",{className:"last-days",children:e.jsx(gt,{})}),e.jsx("div",{className:"category-legend",children:e.jsx($t,{})})]}),e.jsxs("div",{className:"bottom-section",children:[e.jsx("div",{className:"category-analytic",children:e.jsx(Nt,{})}),e.jsx("div",{className:"sankey",children:e.jsx(Ct,{})}),e.jsx("div",{className:"history",children:e.jsx(bt,{})})]})]})})}const kt=Ie("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Je=Ua.forwardRef(({className:a,variant:s,size:t,asChild:l=!1,loading:c,children:u,...p},y)=>{const b=l?ze:"button";return e.jsx(b,{className:g(kt({variant:s,size:t,className:a})),disabled:c,ref:y,...p,children:e.jsxs(e.Fragment,{children:[c&&e.jsx(Ys,{className:g("h-4 w-4 animate-spin",u&&"mr-2")}),u]})})});Je.displayName="LoadingButton";const ss=Gs,ts=r.createContext({}),$e=({...a})=>e.jsx(ts.Provider,{value:{name:a.name},children:e.jsx(Ws,{...a})}),Se=()=>{const a=r.useContext(ts),s=r.useContext(ns),{getFieldState:t,formState:l}=Zs(),c=t(a.name,l);if(!a)throw new Error("useFormField should be used within <FormField>");const{id:u}=s;return{id:u,name:a.name,formItemId:`${u}-form-item`,formDescriptionId:`${u}-form-item-description`,formMessageId:`${u}-form-item-message`,...c}},ns=r.createContext({}),je=r.forwardRef(({className:a,...s},t)=>{const l=r.useId();return e.jsx(ns.Provider,{value:{id:l},children:e.jsx("div",{ref:t,className:g("space-y-2",a),...s})})});je.displayName="FormItem";const ye=r.forwardRef(({className:a,...s},t)=>{const{error:l,formItemId:c}=Se();return e.jsx(S,{ref:t,className:g(l&&"text-destructive",a),htmlFor:c,...s})});ye.displayName="FormLabel";const be=r.forwardRef(({...a},s)=>{const{error:t,formItemId:l,formDescriptionId:c,formMessageId:u}=Se();return e.jsx(ze,{ref:s,id:l,"aria-describedby":t?`${c} ${u}`:`${c}`,"aria-invalid":!!t,...a})});be.displayName="FormControl";const St=r.forwardRef(({className:a,...s},t)=>{const{formDescriptionId:l}=Se();return e.jsx("p",{ref:t,id:l,className:g("text-[0.8rem] text-muted-foreground",a),...s})});St.displayName="FormDescription";const ve=r.forwardRef(({className:a,children:s,...t},l)=>{const{error:c,formMessageId:u}=Se(),p=c?String(c==null?void 0:c.message):s;return p?e.jsx("p",{ref:l,id:u,className:g("text-[0.8rem] font-medium text-destructive",a),...t,children:p}):null});ve.displayName="FormMessage";const Tt="https://api.madanilab.site",sa={clientId:"06b0630f66b18f473a617819261e2e6a.access",clientSecret:"2554796ee90aee81b35787f4d427b86bd1d0cece38c6d9d8bee9336b88b52eb6"},At=ue.object({username:ue.string().min(3,{message:"Username must be at least 3 characters."}),password:ue.string().min(5,{message:"Password must be at least 5 characters."})}),Ft=()=>{const[a,s]=r.useState(!1),{setToken:t,setUserId:l,setUpdate:c,setIsAuthenticated:u}=r.useContext(V),p=Oe(),y=Ea({resolver:Oa(At),defaultValues:{username:"",password:""}}),b=($,d,f)=>{localStorage.setItem("FinanceMadaniLabBearerToken",$),localStorage.setItem("FinanceMadaniLabUserId",d),localStorage.setItem("FinanceMadaniLabUsername",f)};async function w($){s(!0),await P.post(Tt+"/auth/login",$,{headers:{"Content-Type":"application/json","CF-Access-Client-Id":sa.clientId,"CF-Access-Client-Secret":sa.clientSecret}}).then(d=>{s(!1);let f=d.data.token;b(f.split(" ")[1],d.data.userId,d.data.username),c(T=>!T),p("/home")}).catch(d=>{s(!1),u(!1),console.error("Error logging in:",d)})}function k(){p("/signup")}return e.jsxs("div",{className:"main-auth",children:[e.jsxs("div",{className:"form",children:[e.jsx("h2",{className:"pb-2 text-3xl font-semibold tracking-tight",children:"Log In"}),e.jsx(ss,{...y,children:e.jsxs("form",{onSubmit:y.handleSubmit(w),className:"space-y-8",children:[e.jsx($e,{control:y.control,name:"username",render:({field:$})=>{var d;return e.jsxs(je,{children:[e.jsx(ye,{children:"Username"}),e.jsx(be,{children:e.jsx(B,{placeholder:"Username",maxLength:20,...$,onChange:f=>{const T=f.target.value.replace(/[^a-zA-Z0-9]/g,"");$.onChange(T)}})}),e.jsx(ve,{children:(d=y.formState.errors.username)==null?void 0:d.message})]})}}),e.jsx($e,{control:y.control,name:"password",render:({field:$})=>{var d;return e.jsxs(je,{children:[e.jsx(ye,{children:"Password"}),e.jsx(be,{children:e.jsx(B,{type:"password",placeholder:"Password",maxLength:30,...$})}),e.jsx(ve,{children:(d=y.formState.errors.password)==null?void 0:d.message})]})}}),e.jsx(Je,{type:"submit",loading:a,onSubmit:w,children:"Submit"})]})})]}),e.jsxs("div",{className:"bottomBtn",children:[e.jsx("p",{children:"Don't have an account? "}),e.jsx(U,{variant:"link",onClick:k,children:"Sign Up"})]})]})},Pt="https://api.madanilab.site",ta={clientId:"06b0630f66b18f473a617819261e2e6a.access",clientSecret:"2554796ee90aee81b35787f4d427b86bd1d0cece38c6d9d8bee9336b88b52eb6"},Lt=ue.object({username:ue.string().min(3,{message:"Username must be at least 3 characters."}).regex(/^[a-zA-Z0-9]+$/,{message:"Username can only contain letters and numbers."}),password:ue.string().min(5,{message:"Password must be at least 5 characters."})}),_t=()=>{const[a,s]=r.useState(!1),t=Oe(),l=Ea({resolver:Oa(Lt),defaultValues:{username:"",password:""}});async function c(p){s(!0),setTimeout(()=>{s(!1)},5e3);try{const y=await P.post(Pt+"/auth/signup",p,{headers:{"Content-Type":"application/json","CF-Access-Client-Id":ta.clientId,"CF-Access-Client-Secret":ta.clientSecret}});t("/login")}catch(y){console.log(y)}}function u(){t("/login")}return e.jsxs("div",{className:"main-auth",children:[e.jsxs("div",{className:"form",children:[e.jsx("h2",{className:"scroll-m-20 pb-2 text-3xl font-semibold tracking-tight first:mt-0",children:"Sign Up"}),e.jsx(ss,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-8",children:[e.jsx($e,{control:l.control,name:"username",render:({field:p})=>{var y;return e.jsxs(je,{children:[e.jsx(ye,{children:"Username"}),e.jsx(be,{children:e.jsx(B,{placeholder:"Username",maxLength:20,...p,onChange:b=>{const w=b.target.value.replace(/[^a-zA-Z0-9]/g,"");p.onChange(w)}})}),e.jsx(ve,{children:(y=l.formState.errors.username)==null?void 0:y.message})]})}}),e.jsx($e,{control:l.control,name:"password",render:({field:p})=>{var y;return e.jsxs(je,{children:[e.jsx(ye,{children:"Password"}),e.jsx(be,{children:e.jsx(B,{type:"password",placeholder:"Password",maxLength:30,...p})}),e.jsx(ve,{children:(y=l.formState.errors.password)==null?void 0:y.message})]})}}),e.jsx(Je,{type:"submit",loading:a,onSubmit:c,children:"Submit"})]})})]}),e.jsxs("div",{className:"bottomBtn",children:[e.jsx("p",{children:"Already have an account? "}),e.jsx(U,{variant:"link",onClick:u,children:"Log In"})]})]})},ls=r.createContext();function Rt({children:a,defaultTheme:s="system",storageKey:t="vite-ui-theme",...l}){const[c,u]=r.useState(()=>localStorage.getItem(t)||s);r.useEffect(()=>{const y=window.document.documentElement;if(y.classList.remove("light","dark"),c==="system"){const b=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";y.classList.add(b);return}y.classList.add(c)},[c]);const p={theme:c,setTheme:y=>{localStorage.setItem(t,y),u(y)}};return e.jsx(ls.Provider,{...l,value:p,children:a})}const rs=()=>{const a=r.useContext(ls);if(a===void 0)throw new Error("useTheme must be used within a ThemeProvider");return a};function zt(){const{setTheme:a}=rs();return e.jsxs(oe,{children:[e.jsx(ce,{asChild:!0,children:e.jsxs(U,{variant:"outline",size:"icon",children:[e.jsx(Ba,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(Va,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(ee,{align:"end",children:[e.jsx(Z,{onClick:()=>a("light"),children:"Light"}),e.jsx(Z,{onClick:()=>a("dark"),children:"Dark"}),e.jsx(Z,{onClick:()=>a("system"),children:"System"})]})]})}const na="https://api.madanilab.site",Mt=[{code:"USD",symbol:"$",name:"United States Dollar"},{code:"EUR",symbol:"€",name:"Euro"},{code:"JPY",symbol:"¥",name:"Japanese Yen"},{code:"GBP",symbol:"£",name:"British Pound"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"CHF",symbol:"Fr",name:"Swiss Franc"},{code:"CNY",symbol:"¥",name:"Chinese Yuan"},{code:"INR",symbol:"₹",name:"Indian Rupee"},{code:"RUB",symbol:"₽",name:"Russian Ruble"},{code:"ZAR",symbol:"R",name:"South African Rand"},{code:"BRL",symbol:"R$",name:"Brazilian Real"},{code:"MXN",symbol:"$",name:"Mexican Peso"}];function Ut(){const{setDialogIsOpen:a,token:s,setToken:t,userId:l,setUserId:c,config:u,setIsAuthenticated:p,setUserData:y,currency:b,setCurrency:w}=r.useContext(V),{setTheme:k}=rs(),[$,d]=r.useState(null),[f,T]=r.useState({username:"",password:""}),[n,m]=r.useState(!1),N=Oe(),L=()=>{localStorage.removeItem("FinanceMadaniLabBearerToken"),localStorage.removeItem("FinanceMadaniLabUserId"),localStorage.removeItem("FinanceMadaniLabUsername"),p(!1),y(null),c(null),t(null),N("/login")};function A(){const x=localStorage.getItem("FinanceMadaniLabUsername");d(x)}r.useEffect(()=>{A()},[]);function D(){P.delete(`${na}/auth/delete-account`,u).then(()=>{L()}).catch(x=>{console.error("Error deleting account:",x)})}async function M(x){try{if(s&&l){w(x);const o=await P.put(`${na}/api/profile/update-currency/${l}`,{updatedCurrency:x},u);y(o.data.data),w(o.data.data.currency)}w(x)}catch(o){console.error("Error updating currency:",o)}}return e.jsxs(G,{onOpenChange:x=>a(x),children:[e.jsx(W,{asChild:!0,children:e.jsx(U,{variant:"outline",size:"icon",children:e.jsx(Js,{variant:"outline"})})}),e.jsxs(Y,{className:"w-[80%] max-w-[500px]",children:[e.jsx(X,{children:e.jsxs(q,{children:["Hi ",$," 👋"]})}),e.jsxs("div",{className:"sm:p-[20px]",children:[e.jsxs("div",{className:"flex flex-row justify-between items-center mt-[15px]",children:[e.jsx(S,{children:"Set Theme"}),e.jsxs(oe,{children:[e.jsx(ce,{asChild:!0,children:e.jsxs(U,{variant:"outline",className:"w-[150px]",children:[e.jsx(Ba,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(Va,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(ee,{className:"w-[150px]",align:"start",children:[e.jsx(Z,{onClick:()=>k("light"),children:"Light"}),e.jsx(Z,{onClick:()=>k("dark"),children:"Dark"}),e.jsx(Z,{onClick:()=>k("system"),children:"System"})]})]})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center mt-[10px]",children:[e.jsx(S,{children:"Currency"}),e.jsxs(oe,{children:[e.jsx(ce,{asChild:!0,children:e.jsx(U,{className:"w-[150px]",variant:"outline",children:b.code})}),e.jsx(ee,{className:"w-[210px]",align:"start",children:e.jsx(E,{className:"h-[250px]",children:Mt.map(x=>e.jsxs(Z,{onClick:()=>M(x),children:[x.code," - ",x.name]},x.code))})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-[50px]",children:[e.jsxs(Ke,{modal:!0,open:n,onOpenChange:m,children:[e.jsx(Ye,{asChild:!0,children:e.jsx(U,{variant:"ghost",children:"Delete Account"})}),e.jsxs(ke,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."}),e.jsxs("form",{onSubmit:x=>{x.preventDefault(),D()},children:[e.jsx(B,{className:"m-[5px]",type:"text",placeholder:"Username",value:f.username,onChange:x=>T(o=>({...o,username:x.target.value})),"aria-label":"Username",disabled:!0}),e.jsx(B,{className:"m-[5px]",type:"password",placeholder:"Password",value:f.password,onChange:x=>T(o=>({...o,password:x.target.value})),"aria-label":"Password",disabled:!0}),e.jsx(U,{className:"mt-[5px] ml-[5px]",variant:"destructive",type:"submit",disabled:!0,children:"Delete Account"})]})]})]}),e.jsx(U,{variant:"ghost",onClick:L,children:"Sign Out"})]})]})]})}function Et(){const{mainLoading:a,isAuthenticated:s}=r.useContext(V);return e.jsxs(Rt,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:[e.jsxs("div",{className:"header",children:[e.jsx("h2",{className:"scroll-m-20 pb-2 lg:text-2xl font-semibold tracking-tight",children:e.jsx("a",{href:"https://finance.madanilab.site",children:"MadaniLab Finance"})}),s?e.jsx(Ut,{}):e.jsx(zt,{})]}),e.jsxs(Xs,{children:[e.jsx(me,{path:"/",element:s?e.jsx(we,{to:"/home"}):e.jsx(we,{to:"/login"})}),s?e.jsxs(e.Fragment,{children:[e.jsx(me,{path:"/home",element:e.jsx(Dt,{})}),e.jsx(me,{path:"/login",element:e.jsx(we,{to:"/home"})}),e.jsx(me,{path:"/signup",element:e.jsx(we,{to:"/home"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{path:"/login",element:e.jsx(Ft,{})}),e.jsx(me,{path:"/signup",element:e.jsx(_t,{})})]})]})]})}qs.createRoot(document.getElementById("root")).render(e.jsx(Ua.StrictMode,{children:e.jsx(Qs,{children:e.jsx(et,{children:e.jsx(Et,{})})})}));
